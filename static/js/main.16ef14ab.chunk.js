(this["webpackJsonpmailinabox-ui"]=this["webpackJsonpmailinabox-ui"]||[]).push([[0],{121:function(e){e.exports=JSON.parse('{"hostname":"box.example.com","mockApi":true}')},160:function(e,t,a){e.exports=a(230)},230:function(e,t,a){"use strict";a.r(t);var n=a(282),r=a(4),o=a(0),i=a.n(o),s=a(41),c=a.n(s),l=a(3),u=a(276),m=a(52),d=Object(m.a)(),p=a(5),f=a(288),h=a(9),g=a(14),b=a(290),E=a(304),y=a(303),v=a(50),S=a(274),O=a(8),A=a(7),j=a.n(A),w=a(13),C=a(118),x=a(119),k="miab-cp-credentials";var R=new(function(){function e(t){Object(C.a)(this,e),this.credentials=t,this.username=void 0,this.password=void 0,this.isAuthenticated=!1;var a=this.credentials.split(":"),n=Object(h.a)(a,2),r=n[0],o=void 0===r?"":r,i=n[1],s=void 0===i?"":i;this.username=o,this.password=s,this.isAuthenticated=Boolean(o&&s)}return Object(x.a)(e,[{key:"getUsername",value:function(){return this.username}},{key:"getPassword",value:function(){return this.password}},{key:"setUsername",value:function(e){this.username=e}},{key:"setPassword",value:function(e){this.password=e}},{key:"getIsAuthenticated",value:function(){return this.isAuthenticated}},{key:"persistToStorage",value:function(e){var t,a,n=(t=this.username,a=this.password,"".concat(t).concat(":").concat(a));e?(localStorage.setItem(k,n),sessionStorage.removeItem(k)):(localStorage.removeItem(k),sessionStorage.setItem(k,n))}},{key:"clear",value:function(){localStorage.removeItem(k),sessionStorage.removeItem(k)}}]),e}())(sessionStorage.getItem(k)||localStorage.getItem(k)||":"),I=a(23),T={username:R.getUsername(),password:R.getPassword(),isAuthenticated:R.getIsAuthenticated(),error:""},D=Object(I.b)({name:"auth",initialState:T,reducers:{updateAuth:function(e,t){var a=t.payload,n=a.username,r=a.password,o=a.isAuthenticated,i=a.error,s=void 0===i?null:i;e.username=n,e.password=r,e.isAuthenticated=!!o,e.error=s}}}),M=D.actions.updateAuth,N=D.reducer,B={basePath:"/admin",username:R.getUsername(),password:R.getPassword(),middleware:[]},P=new O.Configuration(B),W=new O.UserApi(P),U=new O.SystemApi(P),z=new O.SSLApi(P),L=new O.DNSApi(P),G=new O.MailApi(P),H=new O.WebApi(P);function F(e){return q.apply(this,arguments)}function q(){return(q=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.status)>=500&&a<=599)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,t.text();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return V.apply(this,arguments)}function V(){return(V=Object(w.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Error)){e.next=2;break}return e.abrupt("return",t.message);case 2:return a=t.statusText,n=t.status,e.next=5,F(t);case 5:return r=e.sent,e.abrupt("return",r||"Request error: ".concat(a).concat(n?" ("+n+")":""));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t,a){return Y.apply(this,arguments)}function Y(){return(Y=Object(w.a)(j.a.mark((function e(t,a,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Error||403!==t.status){e.next=4;break}a(M({username:"",password:"",isAuthenticated:!1,error:"Your token is no longer valid."})),e.next=11;break;case 4:return e.t0=a,e.t1=n,e.next=8,K(t);case 8:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=a(121),J=a(18),Z=a(94);function _(e){var t=Object(o.useState)(e),a=Object(h.a)(t,2),n=a[0],r=a[1],i=Object(Z.a)((function(t){var a=t.target,n=a.name,o=a.value;if(!(n in e))throw new Error("Invalid key: "+n);r((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(J.a)({},n,o))}))})),s=Object(Z.a)((function(){r(e)}));return{inputs:n,setInputs:r,onInputChange:i,resetInputs:s}}var $=a(12),ee=a(90),te=a(299),ae=a(82),ne=a.n(ae),re=a(291),oe=a(37),ie=function(){var e=Object(l.b)();return Object(o.useEffect)((function(){R.clear(),e(M({username:"",password:"",isAuthenticated:!1}))})),null};ie.path="/logout";var se,ce=function(e){var t=e.children,a=Object($.useMediaQuery)({minWidth:r.n}),n={gap:a?"l1":void 0,padding:a?"0 m l2 m":"0 m m m "};return i.a.createElement(f.a,Object.assign({as:"main",styles:{root:{maxWidth:1170,width:"100%"}}},n),t)},le=a(292),ue=function(e){return i.a.createElement(le.a,Object.assign({onReduceData:function(){},styles:{root:{marginTop:0,width:"100%"}}},e))},me=a(15),de=Object(r.I)(Object(p.a)({boxShadow:Object(r.E)().effects.elevation8,backgroundColor:Object(r.E)().palette.white},r.b.fadeIn200)),pe=function(e){var t=e.children,a=Object(me.a)(e,["children"]);return i.a.createElement(f.a,Object.assign({as:"section",padding:"m",gap:"m",className:de},a),t)},fe=a(298),he=a(62);!function(e){e[e.remove=0]="remove",e[e.update=1]="update"}(se||(se={}));var ge,be=Object(I.b)({name:"aliases",initialState:{isGettingAliases:!1,aliases:[],getAliasesError:null,isUpsertingAlias:!1,isRemovingAlias:!1,upsertAliasError:null,upsertAliasResponse:null,removeAliasError:null,removeAliasResponse:null,aliasAction:null},reducers:{getAliasesStart:function(e){e.getAliasesError=null,e.isGettingAliases=!0},getAliasesSuccess:function(e,t){e.isGettingAliases=!1,e.aliases=t.payload},getAliasesError:function(e,t){e.getAliasesError=t.payload,e.isGettingAliases=!1},upsertAliasStart:function(e){e.isUpsertingAlias=!0,e.upsertAliasError=null},upsertAliasSuccess:function(e,t){e.isUpsertingAlias=!1,e.upsertAliasResponse=t.payload},upsertAliasError:function(e,t){e.upsertAliasError=t.payload,e.isUpsertingAlias=!1},upsertAliasReset:function(e){e.isUpsertingAlias=!1,e.upsertAliasError=null,e.upsertAliasResponse=null},upsertAliasResetError:function(e){e.upsertAliasError=null},resetAliasAction:function(e){e.aliasAction=Object(p.a)(Object(p.a)({},e.aliasAction),{},{type:void 0})},setAliasAction:function(e,t){e.aliasAction=t.payload},removeAliasStart:function(e){e.isRemovingAlias=!0,e.removeAliasError=null},removeAliasSuccess:function(e,t){e.isRemovingAlias=!1,e.removeAliasResponse=t.payload},removeAliasError:function(e,t){e.removeAliasError=t.payload,e.isRemovingAlias=!1},removeAliasReset:function(e){e.removeAliasError=null,e.isRemovingAlias=!1,e.removeAliasResponse=null}}}),Ee=be.actions,ye=Ee.getAliasesSuccess,ve=Ee.getAliasesStart,Se=Ee.getAliasesError,Oe=Ee.upsertAliasStart,Ae=Ee.upsertAliasSuccess,je=Ee.upsertAliasError,we=Ee.upsertAliasReset,Ce=Ee.upsertAliasResetError,xe=Ee.resetAliasAction,ke=Ee.setAliasAction,Re=Ee.removeAliasStart,Ie=Ee.removeAliasSuccess,Te=Ee.removeAliasError,De=Ee.removeAliasReset,Me=be.reducer,Ne=function(e){var t=[],a=[];return e.aliases.aliases.forEach((function(e){var n=e.domain,r=e.aliases;a.push({key:"group"+n,name:n,startIndex:t.length,level:0,count:r.length}),t.push.apply(t,Object(he.a)(r))})),[t,a]},Be=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){var t=Object(w.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&a(ve()),t.prev=1,t.next=4,G.getMailAliases({format:O.MailAliasesResponseFormat.Json});case 4:n=t.sent,a(ye(n)),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,X(t.t0,a,Se);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},Pe=a(296),We=a(297),Ue=function(e){var t=e.loadingLabel;return e.hasLoaded?i.a.createElement(Pe.a,{styles:{root:{zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"}}},i.a.createElement(We.a,{label:t})):i.a.createElement(We.a,{label:t})},ze=function(e){var t=e.children;return i.a.createElement("div",{style:{position:"relative"}},t)},Le=a(61),Ge=a(284),He=a(134),Fe=a(294),qe=a(86),Ke=a.n(qe);!function(e){e[e.remove=0]="remove"}(ge||(ge={}));var Ve=Object(I.b)({name:"dns",initialState:{isGettingSecondaryNameserver:!1,isGettingZones:!1,isGettingCustomRecords:!1,isGettingDump:!1,isAddingCustomRecord:!1,isAddingSecondaryNameserver:!1,isRemovingCustomRecord:!1,secondaryNameserver:{hostnames:[]},dump:[],zones:[],customRecords:[],addCustomRecordResponse:null,addSecondaryNameserverResponse:null,removeCustomRecordResponse:null,getSecondaryNameserverError:null,getZonesError:null,getCustomRecordsError:null,getDumpError:null,addCustomRecordError:null,addSecondaryNameserverError:null,removeCustomRecordError:null,dnsAction:null},reducers:{getDumpStart:function(e){e.getDumpError=null,e.isGettingDump=!0},getDumpSuccess:function(e,t){e.isGettingDump=!1,e.dump=t.payload},getDumpError:function(e,t){e.isGettingDump=!1,e.getDumpError=t.payload},getSecondaryNameserverStart:function(e){e.getSecondaryNameserverError=null,e.isGettingSecondaryNameserver=!0},getSecondaryNameserverSuccess:function(e,t){e.isGettingSecondaryNameserver=!1,e.secondaryNameserver=t.payload},getSecondaryNameserverError:function(e,t){e.isGettingSecondaryNameserver=!1,e.getSecondaryNameserverError=t.payload},getZonesStart:function(e){e.getZonesError=null,e.isGettingZones=!0},getZonesSuccess:function(e,t){e.isGettingZones=!1,e.zones=t.payload},getZonesError:function(e,t){e.isGettingZones=!1,e.getZonesError=t.payload},getCustomRecordsStart:function(e){e.getCustomRecordsError=null,e.isGettingCustomRecords=!0},getCustomRecordsSuccess:function(e,t){e.isGettingCustomRecords=!1,e.customRecords=t.payload},getCustomRecordsError:function(e,t){e.isGettingCustomRecords=!1,e.getCustomRecordsError=t.payload},addCustomRecordStart:function(e){e.addCustomRecordError=null,e.isAddingCustomRecord=!0},addCustomRecordSuccess:function(e,t){e.isAddingCustomRecord=!1,e.addCustomRecordResponse=t.payload},addCustomRecordError:function(e,t){e.isAddingCustomRecord=!1,e.addCustomRecordError=t.payload},addCustomRecordResetError:function(e){e.addCustomRecordError=null},addCustomRecordReset:function(e){e.isAddingCustomRecord=!1,e.addCustomRecordError=null,e.addCustomRecordResponse=null},removeCustomRecordStart:function(e){e.removeCustomRecordError=null,e.isRemovingCustomRecord=!0},removeCustomRecordSuccess:function(e,t){e.isRemovingCustomRecord=!1,e.removeCustomRecordResponse=t.payload},removeCustomRecordError:function(e,t){e.isRemovingCustomRecord=!1,e.removeCustomRecordError=t.payload},removeCustomRecordResetError:function(e){e.removeCustomRecordError=null},removeCustomRecordReset:function(e){e.isRemovingCustomRecord=!1,e.removeCustomRecordError=null,e.removeCustomRecordResponse=null},addSecondaryNameserverStart:function(e){e.addSecondaryNameserverError=null,e.isAddingSecondaryNameserver=!0},addSecondaryNameserverSuccess:function(e,t){e.isAddingSecondaryNameserver=!1,e.addSecondaryNameserverResponse=t.payload},addSecondaryNameserverError:function(e,t){e.isAddingSecondaryNameserver=!1,e.addSecondaryNameserverError=t.payload},addSecondaryNameserverResetError:function(e){e.addSecondaryNameserverError=null},addSecondaryNameserverReset:function(e){e.isAddingSecondaryNameserver=!1,e.addSecondaryNameserverError=null,e.addSecondaryNameserverResponse=null},resetDNSAction:function(e){e.dnsAction=Object(p.a)(Object(p.a)({},e.dnsAction),{},{type:void 0})},setDNSAction:function(e,t){e.dnsAction=t.payload}}}),Xe=Ve.actions,Ye=Xe.getSecondaryNameserverStart,Qe=Xe.getSecondaryNameserverSuccess,Je=Xe.getSecondaryNameserverError,Ze=Xe.getZonesStart,_e=Xe.getZonesSuccess,$e=Xe.getZonesError,et=Xe.getCustomRecordsStart,tt=Xe.getCustomRecordsSuccess,at=Xe.getCustomRecordsError,nt=Xe.getDumpStart,rt=Xe.getDumpSuccess,ot=Xe.getDumpError,it=Xe.addCustomRecordStart,st=Xe.addCustomRecordSuccess,ct=Xe.addCustomRecordError,lt=Xe.addCustomRecordResetError,ut=Xe.addCustomRecordReset,mt=Xe.addSecondaryNameserverStart,dt=Xe.addSecondaryNameserverSuccess,pt=Xe.addSecondaryNameserverError,ft=Xe.addSecondaryNameserverResetError,ht=Xe.addSecondaryNameserverReset,gt=Xe.removeCustomRecordStart,bt=Xe.removeCustomRecordSuccess,Et=Xe.removeCustomRecordError,yt=(Xe.removeCustomRecordResetError,Xe.removeCustomRecordReset),vt=Xe.resetDNSAction,St=Xe.setDNSAction,Ot=Ve.reducer;function At(e,t){return e.qname===t.qname?e.rtype===t.rtype?e.value.localeCompare(t.value):e.rtype.localeCompare(t.rtype):e.qname.localeCompare(t.qname)}function jt(e){return Object(p.a)(Object(p.a)({},e),{},{qname:e.qname.split(".").reverse().join(".")})}var wt,Ct=function(e){var t=function(e){return e.dns.customRecords.slice().map(jt).sort(At).map(jt)}(e),a=[];return t.forEach((function(e,t){var n,r=Ke.a.parse(e.qname);if(!r.error&&r.domain){var o=r.domain;(null===(n=a[a.length-1])||void 0===n?void 0:n.name)!==o&&a.push({key:"customDnsGroup"+o,name:o,startIndex:t,isCollapsed:!1,level:0,count:0})}})),a=a.map((function(e,n){var r;return Object(p.a)(Object(p.a)({},e),{},{count:((null===(r=a[n+1])||void 0===r?void 0:r.startIndex)||t.length)-e.startIndex})})),[t,a]},xt=function(e){var t=e.dns.dump,a=[],n=[];return t.forEach((function(e){var t=Object(h.a)(e,2),r=t[0],o=t[1];n.push({key:"dnsDumpGroup"+r,name:r,startIndex:a.length,isCollapsed:!1,level:0,count:o.length}),a.push.apply(a,Object(he.a)(o))})),[a,n]},kt=function(){return function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ye()),e.prev=1,e.next=4,L.getDnsSecondaryNameserver();case 4:a=e.sent,t(Qe(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,Je);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Rt=function(){return function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(et()),e.prev=1,e.next=4,L.getDnsCustomRecords();case 4:a=e.sent,t(tt(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,at);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},It=function(){return function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(nt()),e.prev=1,e.next=4,L.getDnsDump();case 4:a=e.sent,t(rt(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,ot);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()};!function(e){e[e.install=0]="install"}(wt||(wt={}));var Tt,Dt,Mt,Nt=Object(I.b)({name:"ssl",initialState:{isGettingStatus:!1,isGeneratingCSR:!1,isInstallingCertificate:!1,sslStatus:{canProvision:[],status:[]},generateCSRResponse:null,installCertificateResponse:null,getStatusError:null,generateCSRError:null,installCertificateError:null,sslAction:null},reducers:{getSSLStatusStart:function(e){e.getStatusError=null,e.isGettingStatus=!0},getSSLStatusSuccess:function(e,t){e.isGettingStatus=!1,e.sslStatus=t.payload},getSSLStatusError:function(e,t){e.getStatusError=t.payload,e.isGettingStatus=!1},generateCSRStart:function(e){e.generateCSRError=null,e.isGeneratingCSR=!0},generateCSRSuccess:function(e,t){e.isGeneratingCSR=!1,e.generateCSRResponse=t.payload},generateCSRError:function(e,t){e.generateCSRError=t.payload,e.isGeneratingCSR=!1},generateCSRReset:function(e){e.generateCSRError=null,e.generateCSRResponse=null,e.isGeneratingCSR=!1},installCertificateStart:function(e){e.installCertificateError=null,e.isInstallingCertificate=!0},installCertificateSuccess:function(e,t){e.isInstallingCertificate=!1,e.installCertificateResponse=t.payload},installCertificateError:function(e,t){e.installCertificateError=t.payload,e.isInstallingCertificate=!1},installCertificateReset:function(e){e.installCertificateError=null,e.installCertificateResponse=null,e.isInstallingCertificate=!1},resetSSLAction:function(e){e.sslAction=null},setSSLAction:function(e,t){e.sslAction=t.payload}}}),Bt=Nt.actions,Pt=Bt.getSSLStatusSuccess,Wt=Bt.getSSLStatusStart,Ut=Bt.getSSLStatusError,zt=Bt.generateCSRStart,Lt=Bt.generateCSRSuccess,Gt=Bt.generateCSRError,Ht=Bt.generateCSRReset,Ft=Bt.installCertificateStart,qt=Bt.installCertificateSuccess,Kt=Bt.installCertificateError,Vt=Bt.installCertificateReset,Xt=Bt.resetSSLAction,Yt=Bt.setSSLAction,Qt=Nt.reducer,Jt=function(){return function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Wt()),e.prev=1,e.next=4,z.getSSLStatus();case 4:a=e.sent,t(Pt(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,Ut);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Zt=a(300),_t=a(87),$t=a(130),ea=a(287),ta=Object(r.I)(Object(p.a)({},r.b.fadeIn400)),aa=function(e){var t=e.animate,a=void 0===t||t,n=e.className,o=Object(me.a)(e,["animate","className"]),s=a?Object(p.a)(Object(p.a)({},o),{},{className:Object(r.I)(n,ta)}):o;return i.a.createElement(fe.a,Object.assign({},s,{dismissButtonAriaLabel:"Close"}))},na=a(306),ra=a(132),oa=a(272),ia=a(273),sa=Object(r.E)(),ca=Object(r.I)({marginBottom:"-3px"}),la=function(e){var t=e.maxWidth,a=void 0===t?320:t,n=e.defaultRender,r=Object(me.a)(e,["maxWidth","defaultRender"]),o=Object(oa.a)(!1),s=Object(h.a)(o,2),c=s[0],l=s[1].toggle,u=Object(ia.a)("iconButton");return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{horizontal:!0,verticalAlign:"center"},null===n||void 0===n?void 0:n(r),i.a.createElement(na.a,{id:u,title:"Info",ariaLabel:"Info",iconProps:{iconName:"Info"},onClick:l,className:ca})),c&&i.a.createElement(ra.a,{target:"#"+u,onDismiss:l,role:"alertdialog",styles:{root:{maxWidth:a}}},i.a.createElement(f.a,{horizontalAlign:"start",padding:"m",gap:"m"},i.a.createElement(te.a,null,e.calloutText))))},ua=function(e){return function(t,a){return i.a.createElement(la,Object.assign({},t,{calloutText:e,defaultRender:a}))}},ma={subComponentStyles:{label:{root:{selectors:{":after":{paddingRight:sa.spacing.s2}}}}}};!function(e){e.regular="REGULAR",e.catchAll="CATCH_ALL",e.domainAlias="DOMAIN_ALIAS"}(Dt||(Dt={})),function(e){e.any="ANY",e.manual="MANUAL"}(Mt||(Mt={}));var da=(Tt={},Object(J.a)(Tt,Dt.regular,{text:"Regular",alias:{placeholder:"you@yourdomain.com (incoming email address)",info:"You may use international (non-ASCII) characters for the domain part of the email address only."},forwardsTo:{placeholder:"you@yourdomain.com (forward to email address)",info:"One address per line or separated by commas."},permittedSenders:{placeholder:"you@yourdomain.com",info:"One address per line or separated by commas.",any:"Any mail user listed in the Forwards To box can send mail claiming to be from the alias address.",manual:"I\u2019ll enter the mail users that can send mail claiming to be from the alias address."}}),Object(J.a)(Tt,Dt.catchAll,{text:"Catch-All",info:"A catch-all alias captures all otherwise unmatched email to a domain.",alias:{placeholder:"@yourdomain.com (incoming catch-all domain)",info:"Enter just the part of an email address starting with the @-sign. You may use international (non-ASCII) characters for the domain part of the email address only."},forwardsTo:{placeholder:"you@yourdomain.com (forward to email address)",info:"One address per line or separated by commas."},permittedSenders:{placeholder:"you@yourdomain.com",info:"One address per line or separated by commas.",any:"Any mail user listed in the Forwards To box can send mail claiming to be from any address on the alias domain.",manual:"I\u2019ll enter the mail users that can send mail claiming to be from any address on the alias domain."}}),Object(J.a)(Tt,Dt.domainAlias,{text:"Domain Alias",info:"A domain alias forwards all otherwise unmatched email from one domain to another domain, preserving the part before the @-sign.",alias:{placeholder:"@yourdomain.com (incoming catch-all domain)",info:"Enter just the part of an email address starting with the @-sign. You may use international (non-ASCII) characters for the domain part of the email address only."},forwardsTo:{placeholder:"@otherdomain.com (forward to other domain)",info:"Enter just the part of an email address starting with the @-sign."},permittedSenders:{placeholder:"you@yourdomain.com",info:"One address per line or separated by commas.",any:"Any mail user listed in the Forwards To box can send mail claiming to be from any address on the alias domain.",manual:"I\u2019ll enter the mail users that can send mail claiming to be from any address on the alias domain."}}),Tt),pa=Object(r.E)(),fa=Object(r.I)({flexBasis:0});var ha={address:"",forwardsTo:"",permittedSenders:"",updateIfExists:0},ga=function(e){var t,a=e.children,n=e.updateAlias,r=void 0===n?ha:n,s=Object(l.c)((function(e){return e.aliases})),c=s.upsertAliasResponse,u=s.upsertAliasError,m=Object(l.b)(),d=Object(o.useState)(function(e){var t=e.address,a=e.forwardsTo;return"@"===t.charAt(0)&&"@"===a.charAt(0)?Dt.domainAlias:"@"===t.charAt(0)?Dt.catchAll:Dt.regular}(r)),E=Object(h.a)(d,2),y=E[0],v=E[1],S=Object(o.useState)(r.permittedSenders?Mt.manual:Mt.any),O=Object(h.a)(S,2),A=O[0],C=O[1],x=_(r),k=x.inputs,R=x.onInputChange,I=x.resetInputs,T=[{key:Mt.any,text:da[y].permittedSenders.any},{key:Mt.manual,text:da[y].permittedSenders.manual}],D=Object(Z.a)((function(e,t){t&&C(t.key)})),M=Object(Z.a)((function(e,t){e&&e.props&&e.props.itemKey&&v(e.props.itemKey)})),N=Object(Z.a)((function(e){m(Ce())})),B=Object(o.useMemo)((function(){return ua(i.a.createElement(i.a.Fragment,null,"Only forward mail to addresses handled by this Mail-in-a-Box, since mail forwarded by aliases to other domains may be rejected or filtered by the receiver. To forward mail to other domains, create a mail user and then log into webmail for the user and create a filter rule to forward mail."))}),[]);return Object(o.useEffect)((function(){c&&I()}),[I,c]),i.a.createElement(f.a,{gap:"m",as:"form",grow:1,className:fa,onSubmit:function(e){e.preventDefault(),m(function(e){return function(){var t=Object(w.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Oe()),t.prev=1,t.next=4,G.upsertMailAlias(e);case 4:n=t.sent,a(Ae(n)),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,X(t.t0,a,je);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(Object(p.a)(Object(p.a)({},k),{},{permittedSenders:A===Mt.manual?k.permittedSenders:""})))}},u&&i.a.createElement(aa,{messageBarType:g.a.error,isMultiline:!1,onDismiss:N,dismissButtonAriaLabel:"Close"},u),i.a.createElement(f.a,{gap:"s2"},i.a.createElement(Zt.a,{linkSize:_t.b.normal,linkFormat:_t.a.tabs,onLinkClick:M,selectedKey:y},Object.keys(da).map((function(e){return i.a.createElement($t.a,{headerText:da[e].text,itemKey:e,headerButtonProps:{disabled:1===r.updateIfExists}},da[e].info?i.a.createElement(aa,{styles:{root:{marginTop:pa.spacing.s1}}},da[e].info):null)})))),i.a.createElement(b.a,{label:"Alias",required:!0,placeholder:da[y].alias.placeholder,description:da[y].alias.info,styles:{description:Object(p.a)({},pa.fonts.small)},onChange:R,name:"address",value:k.address,autoFocus:!r.address,disabled:!!r.address}),i.a.createElement(b.a,{label:"Forwards To",multiline:!0,rows:3,required:!0,placeholder:da[y].forwardsTo.placeholder,description:da[y].forwardsTo.info,styles:Object(p.a)({description:Object(p.a)({},pa.fonts.small)},ma),name:"forwardsTo",onChange:R,value:k.forwardsTo,onRenderLabel:B,autoFocus:!!r.address}),i.a.createElement(ea.a,{selectedKey:A,options:T,onChange:D,label:"Permitted Senders",required:!0}),A===Mt.manual&&i.a.createElement(b.a,{multiline:!0,rows:3,required:!0,name:"permittedSenders",placeholder:da[y].permittedSenders.placeholder,onChange:R,value:null!==(t=k.permittedSenders)&&void 0!==t?t:"",styles:Object(p.a)({description:Object(p.a)({},pa.fonts.small)},ma),description:da[y].permittedSenders.info}),a)},ba=Object(r.E)(),Ea=Object(r.I)({padding:ba.spacing.m,fontFamily:"monospace",backgroundColor:ba.palette.neutralLighterAlt,borderColor:ba.semanticColors.variantBorder,borderRadius:ba.effects.roundedCorner2,borderWidth:1,borderStyle:"solid",overflow:"auto",textOverflow:"unset",margin:0}),ya=function(e){var t=e.children;return i.a.createElement(te.a,{as:"pre",className:Ea,block:!0},t)},va=Object(r.I)({flexBasis:0,minWidth:0}),Sa={type:Le.a.largeHeader,title:"Alias Added"},Oa={isBlocking:!0},Aa=function(e){var t=Object.assign({},e),a=Object(l.c)((function(e){return e.aliases})),n=a.isUpsertingAlias,s=a.upsertAliasResponse,c=Object(l.b)(),u=Object(o.useState)(!0),m=Object(h.a)(u,2),d=m[0],p=m[1],g=Object(o.useState)(!1),b=Object(h.a)(g,2),E=b[0],y=b[1],v=Object($.useMediaQuery)({minWidth:r.m}),O={horizontal:v,gap:v?"l2":"m"},A=Object(Z.a)((function(){c(we()),y(!1)})),j=Object(Z.a)((function(e){p(!0)}));return Object(o.useEffect)((function(){s&&d&&!E&&p(!1)}),[s,E,d]),Object(o.useEffect)((function(){d||y(!0)}),[d]),Object(o.useEffect)((function(){s&&(c(Be()),c(Jt()),c(It()))}),[c,s]),Object(o.useEffect)((function(){return function(){c(we())}}),[c]),i.a.createElement(f.a,null,i.a.createElement(Ge.a,{hidden:d,dialogContentProps:Sa,modalProps:Oa,minWidth:480,maxWidth:480,onDismissed:A},i.a.createElement(ya,null,s),i.a.createElement(He.a,null,i.a.createElement(S.a,{text:"OK",onClick:j}))),i.a.createElement(f.a,Object.assign({},t,O),i.a.createElement(f.a,{gap:"m",grow:1,className:va},i.a.createElement(te.a,null,"Aliases are email forwarders. An alias can forward email to a"," ",i.a.createElement(Fe.a,{href:"#"},"mail user")," or to any email address."),i.a.createElement(te.a,null,"To use an alias or any address besides your own login username in outbound mail, the sending user must be included as a permitted sender for the alias.")),i.a.createElement(ga,null,i.a.createElement(f.a,{horizontal:!0},i.a.createElement(S.a,{type:"submit",disabled:n},"Add Alias")))))},ja=a(136),wa=a(281),Ca=a(17),xa=a(43),ka=function(e){return e?i.a.createElement(ja.a,e):null},Ra=i.a.memo((function(e){var t=e.props,a=e.defaultRender,n=e.onToggleGroupCollapse,r=function(){(null===t||void 0===t?void 0:t.group)&&n(t.group.key,!t.group.isCollapsed)};return i.a.createElement("div",{onClick:function(e){t&&t.group&&(e.preventDefault(),r())}},a(Object(p.a)(Object(p.a)({},t),{},{onToggleCollapse:r})))})),Ia=function(e){var t=e.openedGroupsState,a=e.groups,n=Object(me.a)(e,["openedGroupsState","groups"]),r=Object(h.a)(t,2),s=r[0],c=r[1],l=Object(o.useState)(!1),u=Object(h.a)(l,2),m=u[0],d=u[1],f=Object(o.useCallback)((function(e,t){t?s.splice(s.indexOf(e),1):s.push(e),c(s.slice())}),[s,c]),g=function(){m||s.length===a.length?(c([]),d(!1)):(c(a.map((function(e){return e.key}))),d(!0))},b=a.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{isCollapsed:-1===s.indexOf(e.key)})}));return i.a.createElement(wa.a,Object.assign({},n,{groups:b,layoutMode:Ca.e.justified,selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained,isHeaderVisible:!0,onShouldVirtualize:function(){return b.length>20||n.items.length>50},onRenderDetailsHeader:function(e,t){return(null===t||void 0===t?void 0:t(Object(p.a)(Object(p.a)({},e),{},{onToggleCollapseAll:g,styles:{root:{paddingTop:0}}})))||null},onRenderRow:ka,groupProps:{isAllGroupsCollapsed:0===s.length,onRenderHeader:function(e,t){return t&&e?i.a.createElement(Ra,{props:e,defaultRender:t,onToggleGroupCollapse:f}):null}}}))},Ta=a(135),Da=Object(r.E)(),Ma=function(e){var t=e.children,a=e.isLoading,n=void 0!==a&&a;return i.a.createElement(f.a,{horizontalAlign:"end",verticalAlign:"center",horizontal:!0,gap:"s1",styles:{root:{marginTop:Da.spacing.m}}},n&&i.a.createElement(y.a,{size:v.a.medium}),t)},Na=function(e){var t=e.hidden,a=e.onConfirm,n=e.isLoading,r=e.error,o=e.confirmButtonText,s=e.children,c=e.actionResponse,l=Object(me.a)(e,["hidden","onConfirm","isLoading","error","confirmButtonText","children","actionResponse"]);return i.a.createElement(Ge.a,Object.assign({hidden:t,minWidth:380,maxWidth:480},l),i.a.createElement(f.a,{gap:"m"},r&&i.a.createElement(aa,{messageBarType:g.a.error,isMultiline:!0},r),c&&i.a.createElement(ya,null,c),!c&&s),i.a.createElement(Ma,{isLoading:n},i.a.createElement(S.a,{disabled:n,text:c?"OK":o,onClick:function(){c?l.onDismiss&&l.onDismiss():a()}}),!c&&i.a.createElement(Ta.a,{disabled:n,text:"Cancel",onClick:function(){l.onDismiss&&l.onDismiss()}})))},Ba={type:Le.a.largeHeader,title:"Update Alias"},Pa=function(e){var t,a,n,r=e.alias,o=Object(me.a)(e,["alias"]),s=Object(l.c)((function(e){return e.aliases})),c=s.upsertAliasResponse,u=s.isUpsertingAlias,m=function(){var e;null===(e=o.onDismiss)||void 0===e||e.call(o)},d={address:(null===r||void 0===r?void 0:r.address)||"",forwardsTo:null!==(t=null===r||void 0===r?void 0:r.forwardsTo.join("\n"))&&void 0!==t?t:"",permittedSenders:null!==(a=null===r||void 0===r||null===(n=r.permittedSenders)||void 0===n?void 0:n.join("\n"))&&void 0!==a?a:null,updateIfExists:1},p=c?480:580;return i.a.createElement(Ge.a,Object.assign({},o,{dialogContentProps:Ba,modalProps:{isBlocking:!0},minWidth:p,maxWidth:p}),c&&i.a.createElement(i.a.Fragment,null,i.a.createElement(ya,null,c),i.a.createElement(Ma,null,i.a.createElement(S.a,{text:"OK",onClick:m}))),!c&&i.a.createElement(ga,{updateAlias:d},i.a.createElement(Ma,{isLoading:u},i.a.createElement(S.a,{text:"Update Alias",type:"submit",disabled:u}),i.a.createElement(Ta.a,{text:"Cancel",onClick:m,disabled:u}))))},Wa=function(){var e,t=Object(l.c)((function(e){return e.aliases})),a=t.isRemovingAlias,n=t.aliasAction,r=t.removeAliasError,o=t.removeAliasResponse,s=t.upsertAliasResponse,c=Object(l.b)(),u=Object(Z.a)((function(){c(xe())}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Na,{hidden:(null===n||void 0===n?void 0:n.type)!==se.remove,isLoading:a,onDismiss:u,onDismissed:function(){o&&c(Be()),c(De())},onConfirm:function(){var e;(null===n||void 0===n?void 0:n.alias)&&c((e=null===n||void 0===n?void 0:n.alias.address,function(){var t=Object(w.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Re()),t.prev=1,t.next=4,G.removeMailAlias({address:e});case 4:n=t.sent,a(Ie(n)),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,X(t.t0,a,Te);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()))},error:r,actionResponse:o,confirmButtonText:"Remove Alias",dialogContentProps:{type:Le.a.largeHeader,title:"Remove Alias"},modalProps:{isBlocking:!0}},i.a.createElement(te.a,null,"Are you sure you want to remove alias:"," ",i.a.createElement("strong",null,null===n||void 0===n||null===(e=n.alias)||void 0===e?void 0:e.addressDisplay),"?")),i.a.createElement(Pa,{hidden:(null===n||void 0===n?void 0:n.type)!==se.update,alias:null===n||void 0===n?void 0:n.alias,onDismiss:u,onDismissed:function(){s&&c(Be()),c(we())}}))},Ua=a(16),za=i.a.memo((function(e){var t=e.alias,a=Object(l.b)(),n=Object(Z.a)((function(e){a(ke({alias:t,type:e}))}));return i.a.createElement(na.a,{menuIconProps:{iconName:"MoreVertical"},styles:{menuIcon:{fontWeight:"bold"}},role:"button","aria-haspopup":!0,"aria-label":"Show actions",menuProps:{directionalHint:Ua.a.bottomRightEdge,items:[{key:"updatealias"+t.address,text:"Update",onClick:function(){return n(se.update)}},{key:"removeealias"+t.address,text:"Remove",onClick:function(){return n(se.remove)}}]}})})),La=[{key:"column1",name:"Alias",minWidth:320,isMultiline:!0,isRowHeader:!0,fieldName:"addressDisplay"},{key:"column2",name:"Forwards To",minWidth:260,isMultiline:!0,onRender:function(e){return e&&e.forwardsTo||console.log("item"),i.a.createElement(i.a.Fragment,null,e.forwardsTo.map((function(e){return i.a.createElement(te.a,{block:!0},e)})))}},{key:"column3",name:"Permitted Senders",minWidth:260,isMultiline:!0,onRender:function(e){var t;return i.a.createElement(i.a.Fragment,null,null===(t=e.permittedSenders)||void 0===t?void 0:t.map((function(e){return i.a.createElement(te.a,{block:!0},e)})))}},{key:"column4",name:"Actions",isMultiline:!1,minWidth:50,isPadded:!1,onRender:function(e){return i.a.createElement(za,{alias:e})},className:Object(r.I)({displayName:"DetailsRow-actions-cell"})}],Ga=function(e){var t=e.openedGroupsState,a=Object(me.a)(e,["openedGroupsState"]),n=Object(l.c)(Ne),r=Object(h.a)(n,2),o=r[0],s=r[1];return i.a.createElement(f.a,Object.assign({as:"section"},a),i.a.createElement(Wa,null),i.a.createElement(Ia,{openedGroupsState:t,items:o,groups:s,columns:La}))},Ha=Object(r.I)({overflowX:"auto",overflowY:"hidden"}),Fa=function(e){e.children;var t=e.items,a=void 0===t?[]:t,n=Object(me.a)(e,["children","items"]),s=Object(u.e)(),c=Object(u.f)().pathname,l=Object($.useMediaQuery)({minWidth:r.m}),m=a.map((function(){return Object(o.createRef)()})),d=Object(Z.a)((function(e){(null===e||void 0===e?void 0:e.props.itemKey)&&s.push(e.props.itemKey)}));return Object(o.useEffect)((function(){var e,t,n=a.findIndex((function(e){return e.itemKey===c}));null===(e=m[n])||void 0===e||null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}),[a,m,c]),i.a.createElement(Zt.a,Object.assign({className:Ha,linkSize:l?_t.b.large:_t.b.normal,selectedKey:c,onLinkClick:d},n),a.map((function(e,t){return i.a.createElement($t.a,Object.assign({},e,{onRenderItemLink:(a=m[t],function(e){return e?i.a.createElement("div",{ref:a},e.headerText):null})}));var a})))},qa=function(){var e=Object(l.c)((function(e){return e.aliases})),t=e.isGettingAliases,a=e.getAliasesError,n=e.aliases,r=Object(o.useState)([]),s=Object(l.b)(),c=Object(u.g)(),m=c.path,d=c.url,p=[{itemKey:d,headerText:"Mail Aliases"},{itemKey:"".concat(d,"/add"),headerText:"Add a Mail Alias"}];return Object(o.useEffect)((function(){n.length||s(Be())}),[n.length,s]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Fa,{items:p}),i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:m},i.a.createElement(ze,null,a&&i.a.createElement(fe.a,{messageBarType:g.a.error},a),t&&i.a.createElement(Ue,{loadingLabel:"Loading aliases...",hasLoaded:Boolean(n.length)}),!a&&Boolean(n.length)&&i.a.createElement(Ga,{openedGroupsState:r}))),i.a.createElement(u.b,{exact:!0,path:"".concat(m,"/add")},i.a.createElement(Aa,null))))},Ka=function(){return i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"Mail",key:"mail"},{text:"Aliases",key:"aliases",as:"h1"}]})),i.a.createElement(pe,null,i.a.createElement(qa,null)))};Ka.path="/mail/aliases";var Va,Xa=a(286),Ya=[{key:"column1",name:"Option",minWidth:100,maxWidth:160,isRowHeader:!0,fieldName:"option"},{key:"column2",name:"Value",minWidth:100,isRowHeader:!1,fieldName:"value"}],Qa=[{option:"Server",value:Q.hostname},{option:"Options",value:"Secure Connection"}],Ja=function(){return i.a.createElement(wa.a,{compact:!0,items:Qa,columns:Ya,layoutMode:Ca.e.justified,isHeaderVisible:!1,onShouldVirtualize:function(){return!1},selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained})},Za=[{key:"column1",name:"Option",minWidth:100,maxWidth:160,isRowHeader:!0,fieldName:"option"},{key:"column2",name:"Value",minWidth:100,isRowHeader:!1,fieldName:"value"}],_a=[{option:"Protocol/Method",value:"IMAP"},{option:"Mail server",value:Q.hostname},{option:"IMAP Port",value:"993"},{option:"IMAP Security",value:"SSL or TLS"},{option:"SMTP Port",value:"587"},{option:"SMTP Security",value:'STARTTLS ("always" or "required", if prompted)'},{option:"Username",value:"Your whole email address."},{option:"Password",value:"Your mail password."}],$a=function(){return i.a.createElement(wa.a,{styles:{root:{marginTop:-16}},compact:!0,items:_a,columns:Za,layoutMode:Ca.e.justified,isHeaderVisible:!0,onShouldVirtualize:function(){return!1},selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained})},en=Object(r.I)({flexBasis:0,minWidth:0}),tn=function(){var e=Object($.useMediaQuery)({minWidth:r.q});return i.a.createElement(f.a,{horizontal:e,gap:"l1"},i.a.createElement(f.a,{gap:"m",grow:4,className:en},i.a.createElement(pe,null,i.a.createElement(te.a,{block:!0,variant:"large"},"Webmail"),i.a.createElement(te.a,{block:!0},"Webmail lets you check your email from any web browser. Your webmail site is:"),i.a.createElement(te.a,{block:!0},i.a.createElement(Fe.a,{href:"https://".concat(Q.hostname,"/mail")},"https://",Q.hostname,"/mail")),i.a.createElement(te.a,{block:!0},"Your username is your whole email address.")),i.a.createElement(pe,null,i.a.createElement(te.a,{block:!0,variant:"large"},"Mobile/desktop apps"),i.a.createElement(te.a,{block:!0,variant:"mediumPlus"},"Automatic configuration"),i.a.createElement(te.a,{block:!0},"iOS and OS X only: Open"," ",i.a.createElement(Fe.a,{href:"https://".concat(Q.hostname,"/mailinabox.mobileconfig")},"this configuration link")," ","on your iOS device or on your Mac desktop to easily set up mail (IMAP/SMTP), Contacts, and Calendar. Your username is your whole email address."),i.a.createElement(te.a,{block:!0,variant:"mediumPlus"},"Manual configuration"),i.a.createElement(te.a,{block:!0},"Use the following settings when you set up your email on your phone, desktop, or other device:"),i.a.createElement($a,null),i.a.createElement(te.a,{block:!0},"In addition to setting up your email, you\u2019ll also need to set up ",i.a.createElement(Fe.a,null,"contacts and calendar synchronization")," separately."),i.a.createElement(te.a,{block:!0},"As an alternative to IMAP you can also use the POP protocol: choose POP as the protocol, port 995, and SSL or TLS security in your mail client. The SMTP settings and usernames and passwords remain the same. However, we recommend you use IMAP instead."),i.a.createElement(te.a,{block:!0,variant:"mediumPlus"},"Exchange/ActiveSync settings"),i.a.createElement(te.a,{block:!0},"On iOS devices, devices on this"," ",i.a.createElement(Fe.a,{href:"https://wiki.z-hub.io/display/ZP/Compatibility"},"compatibility list"),", or using Outlook 2007 or later on Windows 7 and later, you may set up your mail as an Exchange or ActiveSync server. However, we\u2019ve found this to be more buggy than using IMAP as described above. If you encounter any problems, please use the manual settings above."),i.a.createElement(Ja,null),i.a.createElement(te.a,{block:!0},"Your device should also provide a contacts list and calendar that syncs to this box when you use this method."))),i.a.createElement(f.a,{grow:3,className:en},i.a.createElement(pe,null,i.a.createElement(te.a,{block:!0,variant:"large"},"Other information about mail on your box"),i.a.createElement(te.a,{block:!0,variant:"mediumPlus"},"Automatic configuration"),i.a.createElement(te.a,{block:!0},"Your box uses a technique called greylisting to cut down on spam. Greylisting works by initially rejecting mail from people you haven\u2019t received mail from before. Legitimate mail servers will attempt redelivery shortly afterwards, but the vast majority of spam gets tricked by this. If you are waiting for an email from someone new, such as if you are registering on a new website and are waiting for an email confirmation, please be aware there will be a minimum of 3 minutes delay, depending how soon the remote server attempts redelivery."),i.a.createElement(te.a,{block:!0,variant:"mediumPlus"},"+tag addresses"),i.a.createElement(te.a,{block:!0},"Every incoming email address also receives mail for"," ",i.a.createElement("code",null,"+tag")," addresses. If your email address is"," ",i.a.createElement("code",null,"you@yourdomain.com"),", you\u2019ll also automatically get mail sent to ",i.a.createElement("code",null,"you+anythinghere@yourdomain.com"),". Use this as a fast way to segment incoming mail for your own filtering rules without having to create aliases in this control panel."),i.a.createElement(te.a,{block:!0,variant:"mediumPlus"},"Use only this box to send as you"),i.a.createElement(te.a,{block:!0},"Your box sets strict email sending policies for your domain names to make it harder for spam and other fraudulent mail to claim to be you. Only this machine is authorized to send email on behalf of your domain names. If you use any other service to send email as you, it will likely get spam filtered by recipients."))))},an=function(){var e=Object($.useMediaQuery)({minWidth:r.n}),t=Object(ia.a)("tooltip");return i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:e,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"Mail",key:"mail"},{text:"Checking and Sending Mail",key:"checkingmail",as:"h1"}]}),i.a.createElement(Xa.a,{content:"Download instructions in PDF format which you can use to send to users of this box.",id:t},i.a.createElement(Ta.a,{iconProps:{iconName:"Download"}},"Download Instructions"))),i.a.createElement(tn,null))};an.path="/mail/instructions",function(e){e[e.addAdminPrivilege=0]="addAdminPrivilege",e[e.removeAdminPrivilege=1]="removeAdminPrivilege",e[e.setPassword=2]="setPassword",e[e.archive=3]="archive"}(Va||(Va={}));var nn=Object(I.b)({name:"users",initialState:{isGettingUsers:!1,users:[],getUsersError:null,isUpdatingUser:!1,isAddingUser:!1,updateUserError:null,updateUserResponse:null,userAction:null,addUserResponse:null,addUserError:null},reducers:{getUsersStart:function(e){e.getUsersError=null,e.isGettingUsers=!0},getUsersSuccess:function(e,t){e.isGettingUsers=!1,e.users=t.payload},getUsersError:function(e,t){e.getUsersError=t.payload,e.isGettingUsers=!1},updateUserStart:function(e){e.updateUserError=null,e.isUpdatingUser=!0},updateUserSuccess:function(e,t){e.isUpdatingUser=!1,e.updateUserResponse=t.payload},updateUserError:function(e,t){e.updateUserError=t.payload,e.isUpdatingUser=!1},updateUserReset:function(e){e.isUpdatingUser=!1,e.updateUserError=null,e.updateUserResponse=null},setUserAction:function(e,t){e.userAction=t.payload},resetUserAction:function(e){e.userAction=Object(p.a)(Object(p.a)({},e.userAction),{},{type:void 0})},addUserStart:function(e){e.addUserError=null,e.isAddingUser=!0},addUserSuccess:function(e,t){e.isAddingUser=!1,e.addUserResponse=t.payload},addUserError:function(e,t){e.addUserError=t.payload,e.isAddingUser=!1},addUserReset:function(e){e.addUserError=null,e.isAddingUser=!1,e.addUserResponse=null},addUserResetError:function(e){e.addUserError=null}}}),rn=nn.actions,on=rn.getUsersSuccess,sn=rn.getUsersStart,cn=rn.getUsersError,ln=rn.updateUserStart,un=rn.updateUserSuccess,mn=rn.updateUserError,dn=rn.updateUserReset,pn=rn.setUserAction,fn=rn.resetUserAction,hn=rn.addUserStart,gn=rn.addUserSuccess,bn=rn.addUserError,En=rn.addUserReset,yn=rn.addUserResetError,vn=nn.reducer,Sn=function(e){var t=e.users.users,a=[],n=[];return t.forEach((function(e){var t=e.domain,r=e.users;n.push({key:"group"+n.length,name:t,startIndex:a.length,isCollapsed:!0,level:0,count:r.length}),a.push.apply(a,Object(he.a)(r))})),[a,n]},On=function(){return function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(sn()),e.prev=1,e.next=4,G.getMailUsers({format:O.MailUsersResponseFormat.Json});case 4:a=e.sent,t(on(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,cn);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},An=a(285),jn=Object(r.E)(),wn=Object(r.I)({flexBasis:0,minWidth:0}),Cn={type:Le.a.largeHeader,title:"User Added"},xn={isBlocking:!0},kn=[{key:O.MailUserPrivilege.Empty,text:"Normal User"},{key:O.MailUserPrivilege.Admin,text:"Administrator"}],Rn={email:"",password:"",privilege:kn[0]},In=function(e){var t,a=Object.assign({},e),n=_(Rn),s=n.inputs,c=n.resetInputs,u=n.setInputs,m=n.onInputChange,d=Object(l.c)((function(e){return e.users})),E=d.isAddingUser,y=d.addUserResponse,v=d.addUserError,O=Object(l.b)(),A=Object(o.useState)(!0),C=Object(h.a)(A,2),x=C[0],k=C[1],R=Object(o.useState)(!1),I=Object(h.a)(R,2),T=I[0],D=I[1],M=Object($.useMediaQuery)({minWidth:r.m}),N={horizontal:M,gap:M?"l2":"m"},B=Object(Z.a)((function(e){k(!0)})),P=Object(Z.a)((function(){O(En()),c(),D(!1)})),W=Object(Z.a)((function(e){O(yn())}));return Object(o.useEffect)((function(){y&&x&&!T&&k(!1)}),[y,T,x]),Object(o.useEffect)((function(){x||D(!0)}),[x]),Object(o.useEffect)((function(){y&&(O(On()),O(Jt()),O(It()))}),[y,O]),Object(o.useEffect)((function(){return function(){O(En())}}),[O]),i.a.createElement(f.a,null,i.a.createElement(Ge.a,{hidden:x,dialogContentProps:Cn,modalProps:xn,minWidth:480,maxWidth:480,onDismissed:P},i.a.createElement(ya,null,y),i.a.createElement(Ma,null,i.a.createElement(S.a,{text:"OK",onClick:B}))),i.a.createElement(f.a,Object.assign({},a,N),i.a.createElement(f.a,{gap:"m",grow:1,className:wn},i.a.createElement(te.a,null,"Add an email address to this system. This will create a new login username/password."),i.a.createElement(aa,{messageBarType:g.a.warning,isMultiline:M,truncated:!M},"Passwords must be at least eight characters consisting of English letters and numbers only. For best results,",i.a.createElement(Fe.a,{href:"#"},"generate a random password"),". Use",i.a.createElement(Fe.a,{href:"#"},"aliases")," to create email addresses that forward to existing accounts. Administrators get access to this control panel. User accounts cannot contain any international (non-ASCII) characters, but",i.a.createElement(Fe.a,{href:"#"},"aliases")," can.")),i.a.createElement(f.a,{gap:"m",as:"form",grow:1,className:wn,onSubmit:function(e){var t,a,n;e.preventDefault(),O((t=s.email,a=s.password,n=s.privilege.key,function(){var e=Object(w.a)(j.a.mark((function e(r){var o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(hn()),e.prev=1,e.next=4,G.addMailUser({email:t,password:a,privileges:n});case 4:o=e.sent,r(gn(o)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,r,bn);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}},v&&i.a.createElement(aa,{messageBarType:g.a.error,onDismiss:W,dismissButtonAriaLabel:"Close"},v),i.a.createElement(b.a,{label:"Email",type:"email",name:"email",required:!0,onChange:m,value:s.email}),i.a.createElement(b.a,{label:"Password",type:"password",name:"password",required:!0,onChange:m,value:s.password,description:"Passwords must be at least eight characters and may not contain spaces.",styles:{description:Object(p.a)({},jn.fonts.small)}}),i.a.createElement(An.a,{label:"Privilege",required:!0,options:kn,selectedKey:s.privilege.key,onChange:(t="privilege",function(e,a){a&&u(Object(p.a)(Object(p.a)({},s),{},Object(J.a)({},t,a)))})}),i.a.createElement(f.a,{horizontal:!0},i.a.createElement(S.a,{type:"submit",disabled:E},"Add User")))))},Tn={type:Le.a.largeHeader,title:"Archive User"},Dn=function(e){var t,a,n=e.hidden,r=e.onDismiss,s=e.userAction,c=e.isUpdatingUser,u=e.updateUserError,m=e.updateUserResponse,d=Object(l.c)((function(e){return e.auth})).username,p=Object(l.b)(),g=Object(o.useState)(!0),b=Object(h.a)(g,2),E=b[0],y=b[1],v={isBlocking:!0,onDismissed:function(){m&&p(On()),p(dn())}},O=!n&&d===(null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.email);return Object(o.useEffect)((function(){y(!O)}),[y,O]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ge.a,{hidden:E,dialogContentProps:Tn,modalProps:v},i.a.createElement(te.a,null,"You cannot archive your own account."),i.a.createElement(He.a,null,i.a.createElement(S.a,{text:"OK",onClick:r}))),i.a.createElement(Na,{dialogContentProps:Tn,modalProps:v,onDismiss:r,isLoading:c,error:u,hidden:n||!E,confirmButtonText:"Archive",actionResponse:m,onConfirm:function(){var e;(null===s||void 0===s?void 0:s.user)&&p((e=s.user,function(){var t=Object(w.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ln()),t.prev=1,t.next=4,G.removeMailUser({email:e.email});case 4:n=t.sent,a(un(n)),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,X(t.t0,a,mn);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()))}},i.a.createElement(f.a,{gap:"m"},i.a.createElement(te.a,null,"Are you sure you want to archive"," ",i.a.createElement("strong",null,null===s||void 0===s||null===(a=s.user)||void 0===a?void 0:a.email),"?"),i.a.createElement(te.a,null,"The user's mailboxes will not be deleted (you can do that later), but the user will no longer be able to log into any services on this machine."))))},Mn={type:Le.a.largeHeader,title:"Set Password"},Nn=function(e){var t,a,n=e.hidden,s=e.onDismiss,c=e.userAction,u=e.isUpdatingUser,m=e.updateUserError,d=e.updateUserResponse,E=Object(l.c)((function(e){return e.auth})).username,y=Object(l.b)(),v=Object(o.useState)(""),O=Object(h.a)(v,2),A=O[0],C=O[1],x=Object(Z.a)((function(e,t){C(null!==t&&void 0!==t?t:"")})),k=E===(null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.email);return i.a.createElement(Ge.a,{hidden:n,dialogContentProps:Mn,modalProps:{isBlocking:!0,onDismissed:function(){C(""),d&&y(On()),y(dn())}},minWidth:480,maxWidth:480},d&&i.a.createElement(i.a.Fragment,null,i.a.createElement(ya,null,d),i.a.createElement(Ma,null,i.a.createElement(S.a,{text:"OK",onClick:s}))),!d&&i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),(null===c||void 0===c?void 0:c.user)&&y(function(e,t){return function(){var a=Object(w.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ln()),a.prev=1,a.next=4,G.setMailUserPassword({email:e.email,password:t});case 4:r=a.sent,n(un(r)),a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(1),a.next=12,X(a.t0,n,mn);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}(c.user,A))}},i.a.createElement(f.a,{gap:"s1"},m&&i.a.createElement(aa,{messageBarType:g.a.error,isMultiline:!0},m),i.a.createElement(te.a,{block:!0},"Set a new password for ",i.a.createElement("strong",null,null===c||void 0===c||null===(a=c.user)||void 0===a?void 0:a.email)),i.a.createElement(b.a,{label:"New Password",type:"password",value:A,required:!0,onChange:x,description:"Passwords must be at least eight characters and may not contain spaces.",styles:{description:Object(p.a)({},Object(r.E)().fonts.small)}}),k&&i.a.createElement(aa,{messageBarType:g.a.warning,isMultiline:!0},"If you change your own password, you will be logged out of this control panel and will need to log in again.")),i.a.createElement(Ma,{isLoading:u},i.a.createElement(S.a,{text:"Set Password",disabled:u,type:"submit"}),i.a.createElement(Ta.a,{text:"Cancel",disabled:u,onClick:s}))))},Bn={type:Le.a.largeHeader,title:"Modify Privileges"},Pn=function(e){var t,a,n,r=e.onDialogDismiss,s=e.userAction,c=e.isUpdatingUser,u=e.updateUserError,m=e.updateUserResponse,d=Object(l.b)(),p=Object(l.c)((function(e){return e.auth})).username,f=Object(o.useState)(!0),g=Object(h.a)(f,2),b=g[0],E=g[1],y=(null===s||void 0===s?void 0:s.type)!==Va.removeAdminPrivilege,v=(null===s||void 0===s?void 0:s.type)!==Va.addAdminPrivilege,A=!y&&p===(null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.email);Object(o.useEffect)((function(){E(!A)}),[A]);var C={isBlocking:!0,onDismissed:function(){m&&d(On()),d(dn())}};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ge.a,{hidden:b,dialogContentProps:Bn,modalProps:C},i.a.createElement(te.a,null,"You cannot remove the admin privilege from yourself."),i.a.createElement(He.a,null,i.a.createElement(S.a,{text:"OK",onClick:r}))),!A&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Na,{dialogContentProps:Bn,modalProps:C,onDismiss:r,isLoading:c,error:u,hidden:y,onConfirm:function(){var e;(null===s||void 0===s?void 0:s.user)&&d((e=s.user,function(){var t=Object(w.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ln()),t.prev=1,t.next=4,G.removeMailUserPrivilege({email:e.email,privilege:O.MailUserPrivilege.Admin});case 4:n=t.sent,a(un(n)),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,X(t.t0,a,mn);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()))},confirmButtonText:"Remove",actionResponse:m},i.a.createElement(te.a,null,"Are you sure you want to remove the admin privilege for"," ",i.a.createElement("strong",null,null===s||void 0===s||null===(a=s.user)||void 0===a?void 0:a.email,"?"))),i.a.createElement(Na,{dialogContentProps:Bn,modalProps:C,onDismiss:r,isLoading:c,error:u,hidden:v,onConfirm:function(){var e;(null===s||void 0===s?void 0:s.user)&&d((e=s.user,function(){var t=Object(w.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ln()),t.prev=1,t.next=4,G.addMailUserPrivilege({email:e.email,privilege:O.MailUserPrivilege.Admin});case 4:n=t.sent,a(un(n)),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,X(t.t0,a,mn);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()))},confirmButtonText:"Add",actionResponse:m},i.a.createElement(te.a,null,"Are you sure you want to add the admin privilege for"," ",i.a.createElement("strong",null,null===s||void 0===s||null===(n=s.user)||void 0===n?void 0:n.email,"?")))))},Wn=function(){var e=Object(l.c)((function(e){return e.users})),t=e.isUpdatingUser,a=e.updateUserError,n=e.updateUserResponse,r=e.userAction,o=Object(l.b)(),s=Object(Z.a)((function(){o(fn())}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Pn,{onDialogDismiss:s,userAction:r,isUpdatingUser:t,updateUserError:a,updateUserResponse:n}),i.a.createElement(Nn,{hidden:(null===r||void 0===r?void 0:r.type)!==Va.setPassword,onDismiss:s,userAction:r,isUpdatingUser:t,updateUserError:a,updateUserResponse:n}),i.a.createElement(Dn,{hidden:(null===r||void 0===r?void 0:r.type)!==Va.archive,onDismiss:s,userAction:r,isUpdatingUser:t,updateUserError:a,updateUserResponse:n}))},Un=i.a.memo((function(e){var t=e.user,a=Object(l.b)(),n=Object(Z.a)((function(e){a(pn({user:t,type:e}))}));return i.a.createElement(na.a,{menuIconProps:{iconName:"MoreVertical"},styles:{menuIcon:{fontWeight:"bold"}},role:"button","aria-haspopup":!0,"aria-label":"Show actions",menuProps:{directionalHint:Ua.a.bottomRightEdge,items:[t.privileges.includes(O.MailUserPrivilege.Admin)?{key:"removeadmin",text:"Remove Admin Privilege",onClick:function(){return n(Va.removeAdminPrivilege)}}:{key:"makeadmin",text:"Make Admin",onClick:function(){return n(Va.addAdminPrivilege)}},{key:"setpassword",text:"Set Password",onClick:function(){return n(Va.setPassword)}},{key:"archiveaccount",text:"Archive Account",onClick:function(){return n(Va.archive)}}]}})})),zn=[{key:"column1",name:"Email Address",minWidth:220,isMultiline:!0,isRowHeader:!0,fieldName:"email",onRender:function(e){var t=e.status===O.MailUserStatus.Inactive?{root:{textDecoration:"line-through"}}:{};return i.a.createElement(i.a.Fragment,null,i.a.createElement(te.a,{styles:t},e.email),e.status===O.MailUserStatus.Inactive&&e.mailbox?i.a.createElement(aa,{messageBarType:g.a.info,isMultiline:!0,styles:{root:{marginTop:10}}},"To restore account, create a new account with this email address. Or to permanently delete the mailbox, delete the directory"," ",i.a.createElement("code",null,e.mailbox)," on the machine."):null)}},{key:"column2",name:"Privilege",minWidth:80,maxWidth:200,isMultiline:!1,onRender:function(e){return e.status===O.MailUserStatus.Active?i.a.createElement(te.a,null,e.privileges.length?i.a.createElement("strong",null,e.privileges.join(", ")):"normal"):null}},{key:"column3",name:"Actions",minWidth:50,maxWidth:60,isMultiline:!1,onRender:function(e){return e.status===O.MailUserStatus.Active?i.a.createElement(Un,{user:e}):null},className:Object(r.I)({displayName:"DetailsRow-actions-cell"})}],Ln=function(e){var t=e.openedGroupsState,a=Object(me.a)(e,["openedGroupsState"]),n=Object(l.c)(Sn),r=Object(h.a)(n,2),o=r[0],s=r[1];return i.a.createElement(f.a,Object.assign({as:"section"},a),i.a.createElement(Wn,null),i.a.createElement(Ia,{openedGroupsState:t,items:o,groups:s,columns:zn}))},Gn=function(){var e=Object(l.c)((function(e){return e.users})),t=e.isGettingUsers,a=e.users,n=e.getUsersError,r=Object(o.useState)([]),s=Object(u.g)(),c=s.path,m=s.url,d=Object(l.b)(),p=[{itemKey:m,headerText:"Mail Users"},{itemKey:"".concat(m,"/add"),headerText:"Add a Mail User"}];return Object(o.useEffect)((function(){a.length||d(On())}),[d,a.length]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Fa,{items:p}),i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:c},i.a.createElement(ze,null,n&&i.a.createElement(fe.a,{messageBarType:g.a.error,isMultiline:!0},n),t&&i.a.createElement(Ue,{loadingLabel:"Loading users...",hasLoaded:Boolean(a.length)}),!n&&Boolean(a.length)&&i.a.createElement(Ln,{openedGroupsState:r}))),i.a.createElement(u.b,{exact:!0,path:"".concat(c,"/add")},i.a.createElement(In,null))))},Hn=function(){return i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"Mail",key:"system"},{text:"Users",key:"users",as:"h1"}]})),i.a.createElement(pe,null,i.a.createElement(Gn,null)))};Hn.path="/mail/users";var Fn=Object(r.E)(),qn=[{option:"Contacts",value:"https://".concat(Q.hostname,"/cloud/contacts")},{option:"Calendar",value:"https://".concat(Q.hostname,"/cloud/calendar")}],Kn=[{key:"column1",name:"For...",minWidth:50,maxWidth:80,isRowHeader:!0,isMultiline:!0,onRender:function(e){return i.a.createElement(te.a,null,i.a.createElement("strong",null,e.option))}},{key:"column2",name:"\tVisit this URL",minWidth:100,isRowHeader:!1,isMultiline:!0,onRender:function(e){return i.a.createElement(te.a,null,i.a.createElement(Fe.a,{href:e.value},e.value))}}],Vn=function(){return i.a.createElement(wa.a,{styles:{root:{marginTop:"-"+Fn.spacing.m}},compact:!0,items:qn,columns:Kn,layoutMode:Ca.e.justified,isHeaderVisible:!0,onShouldVirtualize:function(){return!1},selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained})},Xn=Object(r.E)(),Yn=[{option:"Contacts and Calendar",value:i.a.createElement(te.a,null,i.a.createElement(Fe.a,{href:"https://play.google.com/store/apps/details?id=at.bitfire.davdroid"},"DAVdroid")," ","($3.69; free"," ",i.a.createElement(Fe.a,{href:"https://f-droid.org/packages/at.bitfire.davdroid/"},"here"),")")},{option:"Only Contacts",value:i.a.createElement(te.a,null,i.a.createElement(Fe.a,{href:"https://play.google.com/store/apps/details?id=org.dmfs.carddav.sync"},"CardDAV-Sync free beta")," ","(free)")},{option:"Only Calendar",value:i.a.createElement(te.a,null,i.a.createElement(Fe.a,{href:"https://play.google.com/store/apps/details?id=org.dmfs.caldav.lib"},"CalDAV-Sync")," ","($2.89)")}],Qn=[{key:"column1",name:"For...",minWidth:50,maxWidth:180,isRowHeader:!0,isMultiline:!0,onRender:function(e){return i.a.createElement(te.a,null,i.a.createElement("strong",null,e.option))}},{key:"column2",name:"\tVisit this URL",minWidth:100,isRowHeader:!1,isMultiline:!0,fieldName:"value"}],Jn=function(){return i.a.createElement(wa.a,{styles:{root:{marginTop:"-"+Xn.spacing.m}},compact:!0,items:Yn,columns:Qn,layoutMode:Ca.e.justified,isHeaderVisible:!0,onShouldVirtualize:function(){return!1},selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained})},Zn=[{option:"Account Type",value:"CardDAV or CalDAV"},{option:"Server Name",value:Q.hostname},{option:"Use SSL",value:"Yes"},{option:"Username",value:"Your complete email address"},{option:"Password",value:"Your mail password"}],_n=[{key:"column1",name:"For...",minWidth:50,maxWidth:180,isRowHeader:!0,onRender:function(e){return i.a.createElement(te.a,null,i.a.createElement("strong",null,e.option))}},{key:"column2",name:"\tVisit this URL",minWidth:100,isRowHeader:!1,isMultiline:!0,onRender:function(e){return i.a.createElement(te.a,null,e.value)}}],$n=function(){return i.a.createElement(wa.a,{compact:!0,items:Zn,columns:_n,isHeaderVisible:!1,layoutMode:Ca.e.justified,onShouldVirtualize:function(){return!1},selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained})},er=Object(r.I)({flexBasis:0,minWidth:0}),tr=function(){var e=Object($.useMediaQuery)({minWidth:r.q});return i.a.createElement(f.a,{horizontal:e,gap:"l1"},i.a.createElement(f.a,{gap:"m",grow:1,className:er},i.a.createElement(pe,null,i.a.createElement(te.a,{block:!0,variant:"large"},"In your browser"),i.a.createElement(te.a,{block:!0},"You can edit your contacts and calendar from your web browser."),i.a.createElement(Vn,null),i.a.createElement(te.a,null,"Log in settings are the same as with ",i.a.createElement(Fe.a,{href:"#"},"mail"),": your complete email address and your mail password."))),i.a.createElement(f.a,{grow:1,className:er},i.a.createElement(pe,null,i.a.createElement(te.a,{block:!0,variant:"large"},"On your mobile device"),i.a.createElement(te.a,null,"If you set up your ",i.a.createElement(Fe.a,{href:"#"},"mail")," using Exchange/ActiveSync, your contacts and calendar may already appear on your device."),i.a.createElement(te.a,null,"Otherwise, here are some apps that can synchronize your contacts and calendar to your Android phone."),i.a.createElement(Jn,null),i.a.createElement(te.a,null,"Use the following settings:"),i.a.createElement($n,null))))},ar=function(){var e=Object(ia.a)("tooltip"),t=Object($.useMediaQuery)({minWidth:r.q});return i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:t,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"Contacts & Calendar Synchronization",key:"syncguide",as:"h1"}]}),i.a.createElement(Xa.a,{content:"Download instructions in PDF format which you can use to send to users of this box.",id:e},i.a.createElement(Ta.a,{iconProps:{iconName:"Download"}},"Download Sync Guide"))),i.a.createElement(tr,null))};ar.path="/sync-guide";var nr,rr=Object(I.b)({name:"backups",initialState:{isGettingStatus:!1,isGettingConfig:!1,isUpdatingConfig:!1,status:{backups:[],unmatchedFileSize:0},config:{encPwFile:"",fileTargetDirectory:"",minAgeInDays:1,sshPubKey:"",target:""},updateConfigResponse:null,getStatusError:null,getConfigError:null,updateConfigError:null},reducers:{getStatusStart:function(e){e.getStatusError=null,e.isGettingStatus=!0},getStatusSuccess:function(e,t){e.isGettingStatus=!1,e.status=t.payload},getStatusError:function(e,t){e.getStatusError=t.payload,e.isGettingStatus=!1},getConfigStart:function(e){e.getConfigError=null,e.isGettingConfig=!0},getConfigSuccess:function(e,t){e.isGettingConfig=!1,e.config=t.payload},getConfigError:function(e,t){e.getConfigError=t.payload,e.isGettingConfig=!1},updateConfigStart:function(e){e.updateConfigError=null,e.isUpdatingConfig=!0},updateConfigSuccess:function(e,t){e.isUpdatingConfig=!1,e.updateConfigResponse=t.payload},updateConfigError:function(e,t){e.updateConfigError=t.payload,e.isUpdatingConfig=!1},updateConfigResetError:function(e){e.updateConfigError=null},updateConfigReset:function(e){e.updateConfigError=null,e.isUpdatingConfig=!1,e.updateConfigResponse=null}}}),or=rr.actions,ir=or.getStatusSuccess,sr=or.getStatusStart,cr=or.getStatusError,lr=or.getConfigStart,ur=or.getConfigSuccess,mr=or.getConfigError,dr=or.updateConfigStart,pr=or.updateConfigSuccess,fr=or.updateConfigError,hr=or.updateConfigResetError,gr=or.updateConfigReset,br=rr.reducer,Er=function(){return function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(sr()),e.prev=1,e.next=4,U.getSystemBackupStatus();case 4:a=e.sent,t(ir(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,cr);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()};!function(e){e.off="off",e.local="local",e.rsync="rsync",e.s3="s3"}(nr||(nr={}));var yr=function(e){var t=e.backupConfig,a=e.daysDescription,n=e.onConfigChange,r=Object(o.useState)(String(t.minAgeInDays)),s=Object(h.a)(r,2),c=s[0],l=s[1],u=Object(o.useMemo)((function(){return ua(a)}),[a]);return Object(o.useEffect)((function(){n({target:nr.local,targetUser:"",targetPass:"",minAge:Number(c)||1})}),[c,n]),i.a.createElement(b.a,{value:c,label:"Days",min:1,step:1,type:"number",required:!0,onRenderLabel:u,styles:ma,onChange:function(e,t){l(t)}})},vr=function(e){var t=e.config,a=Object($.useMediaQuery)({minWidth:r.m});return i.a.createElement(i.a.Fragment,null,i.a.createElement(te.a,null,"Backups are stored on this machine\u2019s own hard disk. You are responsible for periodically using SFTP (FTP over SSH) to copy the backup files from",i.a.createElement("code",null,t.fileTargetDirectory)," to a safe location. These files are encrypted, so they are safe to store anywhere."),i.a.createElement(aa,{messageBarType:g.a.warning,isMultiline:a,truncated:!a},"Separately copy the encryption password from"," ",i.a.createElement("code",null,t.encPwFile)," to a safe and secure location. You will need this file to decrypt backup files."))},Sr=function(e){var t,a=e.backupConfig,n=e.isCurrentType,r=e.daysDescription,s=e.onConfigChange,c=n?a.target.substring(8).split("//"):[],l=n&&(null===(t=c.shift())||void 0===t?void 0:t.split("@"))||[],u=_({hostname:n?l[1]:"",path:n?"/".concat(c[0]):"",username:n?l[0]:"",days:String(a.minAgeInDays)}),m=u.inputs,d=u.onInputChange,p=Object(o.useMemo)((function(){return ua(r)}),[r]),f=Object(o.useMemo)((function(){return ua(i.a.createElement(i.a.Fragment,null,"Copy the Public SSH Key above, and paste it within the"," ",i.a.createElement("code",null,"~/.ssh/authorized_keys")," of target user on the backup server specified above. That way you'll enable secure and passwordless authentication from your mail-in-a-box server and your backup server."))}),[]);return Object(o.useEffect)((function(){s({target:"rsync://".concat(m.username,"@").concat(m.hostname,"/").concat(m.path),targetUser:"",targetPass:"",minAge:Number(m.days)||1})}),[m.days,m.hostname,m.path,m.username,s]),i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{value:m.hostname,label:"Hostname",name:"hostname",required:!0,placeholder:"hostname.local",onChange:d}),i.a.createElement(b.a,{value:m.path,label:"Path",name:"path",required:!0,placeholder:"/backups/".concat(Q.hostname),onChange:d}),i.a.createElement(b.a,{value:m.username,label:"Username",name:"username",required:!0,onChange:d}),i.a.createElement(b.a,{value:a.sshPubKey,label:"Public SSH Key",required:!0,readOnly:!0,onRenderLabel:f,styles:ma}),i.a.createElement(b.a,{value:m.days,label:"Days",name:"days",min:1,step:1,type:"number",required:!0,onRenderLabel:p,styles:ma,onChange:d}))},Or=function(e){var t=e.config,a=Object($.useMediaQuery)({minWidth:r.m});return i.a.createElement(i.a.Fragment,null,i.a.createElement(te.a,null,"Backups synced to a remote machine using rsync over SSH, with local copies in ",i.a.createElement("code",null,t.fileTargetDirectory),". These files are encrypted, so they are safe to store anywhere."),i.a.createElement(aa,{messageBarType:g.a.warning,isMultiline:a,truncated:!a},"Separately copy the encryption password from"," ",i.a.createElement("code",null,t.encPwFile)," to a safe and secure location. You will need this file to decrypt backup files."))},Ar=[{key:"s3-eu-west-1.amazonaws.com",text:"eu-west-1"},{key:"s3-ap-southeast-1.amazonaws.com",text:"ap-southeast-1"},{key:"s3-us-gov-west-1.amazonaws.com",text:"us-gov-west-1"},{key:"s3.ap-south-1.amazonaws.com",text:"ap-south-1"},{key:"s3.eu-west-2.amazonaws.com",text:"eu-west-2"},{key:"s3.ca-central-1.amazonaws.com",text:"ca-central-1"},{key:"s3-ap-southeast-2.amazonaws.com",text:"ap-southeast-2"},{key:"s3-us-west-1.amazonaws.com",text:"us-west-1"},{key:"s3-ap-northeast-1.amazonaws.com",text:"ap-northeast-1"},{key:"s3.ap-northeast-2.amazonaws.com",text:"ap-northeast-2"},{key:"s3-sa-east-1.amazonaws.com",text:"sa-east-1"},{key:"s3.amazonaws.com",text:"us-east-1"},{key:"s3.us-east-2.amazonaws.com",text:"us-east-2"},{key:"s3-us-west-2.amazonaws.com",text:"us-west-2"},{key:"s3.eu-central-1.amazonaws.com",text:"eu-central-1"},{key:"s3.cn-north-1.amazonaws.com.cn",text:"cn-north-1"},{key:"other",text:"Other"}],jr=function(e){var t=e.backupConfig,a=e.isCurrentType,n=e.daysDescription,r=e.onConfigChange,s=a?t.target.substring(5).split("/"):[],c=a?s.shift():"",l=Ar.find((function(e){return e.key===c})),u=_({region:(null===l||void 0===l?void 0:l.key)||"",host:("other"===(null===l||void 0===l?void 0:l.key)?"":null===l||void 0===l?void 0:l.key)||"",days:String(t.minAgeInDays),path:s.join("/"),accessKey:"",secretAccessKey:""}),m=u.inputs,d=u.setInputs,f=u.onInputChange,h=Object(o.useMemo)((function(){return ua(n)}),[n]);return Object(o.useEffect)((function(){r({target:"s3://".concat(m.host,"/").concat(m.path),targetUser:m.accessKey||"",targetPass:m.secretAccessKey||"",minAge:Number(m.days)||1})}),[m.accessKey,m.days,m.host,m.path,m.secretAccessKey,r]),i.a.createElement(i.a.Fragment,null,i.a.createElement(An.a,{label:"S3 Region",options:Ar,selectedKey:m.region,required:!0,onChange:function(e,t){t&&d(Object(p.a)(Object(p.a)({},m),{},{region:t.key,host:("other"===t.key?"":null===t||void 0===t?void 0:t.key)||""}))}}),i.a.createElement(b.a,{label:"S3 Host / Endpoint",required:!0,value:m.host,onChange:f,name:"host",placeholder:"Endpoint"}),i.a.createElement(b.a,{label:"S3 Path",required:!0,value:m.path,name:"path",placeholder:"your-bucket-name/backup-directory",onChange:f}),i.a.createElement(b.a,{label:"S3 Access Key",required:!0,name:"accessKey",value:m.accessKey,onChange:f}),i.a.createElement(b.a,{label:"S3 Secret Access Key",required:!0,name:"secretAccessKey",value:m.secretAccessKey,onChange:f}),i.a.createElement(b.a,{value:m.days,label:"Days",min:1,step:1,type:"number",name:"days",required:!0,onRenderLabel:h,styles:ma,onChange:f}))},wr=function(e){var t=e.config,a=Object($.useMediaQuery)({minWidth:r.m});return i.a.createElement(i.a.Fragment,null,i.a.createElement(te.a,null,"Backups are stored in an Amazon Web Services S3 bucket. You must have an AWS account already."),i.a.createElement(aa,{messageBarType:g.a.warning,isMultiline:a,truncated:!a},"You MUST manually copy the encryption password from"," ",i.a.createElement("code",null,t.encPwFile)," to a safe and secure location. You will need this file to decrypt backup files. It is NOT stored in your Amazon S3 bucket."))},Cr=Object(r.I)({flexBasis:0}),xr=[{key:nr.off,text:"Nowhere (Disable Backups)"},{key:nr.local,text:Q.hostname},{key:nr.rsync,text:"rsync"},{key:nr.s3,text:"Amazon S3"}],kr="This is the minimum number of days backup data is kept for. The box makes an incremental backup, so backup data is often kept much longer. An incremental backup file that is less than this number of days old requires that all previous increments back to the most recent full backup, plus that full backup, remain available.";var Rr=function(e){e.backups,e.unmatchedFileSize;var t,a=Object(me.a)(e,["backups","unmatchedFileSize"]),n=Object(l.c)((function(e){return e.system.backups})),s=n.updateConfigError,c=n.updateConfigResponse,u=n.isUpdatingConfig,m=n.config,d=Object(l.b)(),p=Object($.useMediaQuery)({minWidth:r.m}),b=Object(o.useState)(!0),E=Object(h.a)(b,2),y=E[0],v=E[1],O=Object(o.useState)(!1),A=Object(h.a)(O,2),C=A[0],x=A[1],k=(t=m).target==="file://"+t.fileTargetDirectory?nr.local:"off"===t.target?nr.off:"rsync://"===t.target.substring(0,8)?nr.rsync:"s3://"===t.target.substring(0,5)?nr.s3:void 0,R=xr.find((function(e){return e.key===k})),I=Object(o.useState)(R),T=Object(h.a)(I,2),D=T[0],M=T[1],N=Object(o.useState)(),B=Object(h.a)(N,2),P=B[0],W=B[1],z=Object(Z.a)((function(e){v(!0)})),L=Object(Z.a)((function(e,t){M(t)})),G=Object(Z.a)((function(e){W(e)})),H=Object(Z.a)((function(e){d(hr())}));return Object(o.useEffect)((function(){c&&y&&!C&&v(!1)}),[c,C,y]),Object(o.useEffect)((function(){y||x(!0)}),[y]),Object(o.useEffect)((function(){return function(){d(gr())}}),[d]),Object(o.useEffect)((function(){(null===D||void 0===D?void 0:D.key)===nr.off&&W({target:nr.off,targetUser:"",targetPass:"",minAge:m.minAgeInDays||1})}),[m.minAgeInDays,D]),i.a.createElement(f.a,Object.assign({as:"section",gap:"l2",horizontal:p},a),i.a.createElement(Ge.a,{hidden:y,dialogContentProps:{type:Le.a.largeHeader,title:"Backup configuration"},modalProps:{isBlocking:!0},minWidth:480,maxWidth:480,onDismissed:function(){"OK"===c&&d(Er()),d(gr())}},c,i.a.createElement(He.a,null,i.a.createElement(S.a,{text:"OK",onClick:z}))),i.a.createElement(f.a,{gap:"m",grow:1,className:Cr},i.a.createElement(An.a,{label:"Backup to",options:xr,selectedKey:null===D||void 0===D?void 0:D.key,required:!0,onChange:L}),(null===D||void 0===D?void 0:D.key)===nr.local&&i.a.createElement(vr,{config:m}),(null===D||void 0===D?void 0:D.key)===nr.rsync&&i.a.createElement(Or,{config:m}),(null===D||void 0===D?void 0:D.key)===nr.s3&&i.a.createElement(wr,{config:m})),i.a.createElement(f.a,{gap:"m",grow:1,className:Cr,verticalAlign:(null===D||void 0===D?void 0:D.key)===nr.off?"end":"start",as:"form",onSubmit:function(e){e.preventDefault(),P&&d(function(e){return function(){var t=Object(w.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(dr()),t.prev=1,t.next=4,U.updateSystemBackupConfig(e);case 4:n=t.sent,a(pr(n)),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,X(t.t0,a,fr);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(P))}},s&&i.a.createElement(aa,{messageBarType:g.a.error,onDismiss:H},s),(null===D||void 0===D?void 0:D.key)===nr.local&&i.a.createElement(yr,{backupConfig:m,isCurrentType:k===nr.local,daysDescription:kr,onConfigChange:G}),(null===D||void 0===D?void 0:D.key)===nr.rsync&&i.a.createElement(Sr,{backupConfig:m,isCurrentType:k===nr.rsync,daysDescription:kr,onConfigChange:G}),(null===D||void 0===D?void 0:D.key)===nr.s3&&i.a.createElement(jr,{backupConfig:m,isCurrentType:k===nr.s3,daysDescription:kr,onConfigChange:G}),i.a.createElement(f.a,{horizontal:!0},i.a.createElement(S.a,{type:"submit",disabled:u},"Save"))))};function Ir(e){for(var t=["bytes","KB","MB","GB","TB"];1!==t.length&&!(e<1e3);)e/=1024,t.shift();return(e=e>=100?Math.round(e):Math.round(10*e)/10)+" "+t[0]}var Tr=Object(r.I)({fontWeight:"bold"}),Dr=[{key:"column1",name:"When",minWidth:160,maxWidth:160,isMultiline:!0,isRowHeader:!0,onRender:function(e){return i.a.createElement(te.a,{className:e.full?Tr:void 0},e.dateStr)}},{key:"column2",name:"",minWidth:160,isMultiline:!0,isRowHeader:!0,onRender:function(e){return i.a.createElement(te.a,{className:e.full?Tr:void 0},e.dateDelta," ago")}},{key:"column3",name:"Type",isMultiline:!1,minWidth:100,fieldName:"text",onRender:function(e){return i.a.createElement(te.a,{className:e.full?Tr:void 0},e.full?"full":"increment")}},{key:"column4",name:"Size",isMultiline:!1,minWidth:80,onRender:function(e){return i.a.createElement(te.a,{className:e.full?Tr:void 0},Ir(e.size))}},{key:"column5",name:"Deleted In",isMultiline:!1,minWidth:100,onRender:function(e){var t;return i.a.createElement(te.a,{className:e.full?Tr:void 0},null!==(t=e.deletedIn)&&void 0!==t?t:"unknown")}}],Mr=function(e){var t=e.backups,a=void 0===t?[]:t,n=e.unmatchedFileSize,o=Object(me.a)(e,["backups","unmatchedFileSize"]),s=Object($.useMediaQuery)({minWidth:r.m});return i.a.createElement(f.a,Object.assign({as:"section"},o),!a.length&&i.a.createElement(aa,{messageBarType:g.a.warning},"No backups have been made yet."),a.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement(aa,{isMultiline:s,truncated:!s},"The backup location currently contains the backups listed below. The total size of the backups is currently"," ",i.a.createElement("strong",null,function(e,t){return Ir(e.reduce((function(e,t){return e+t.size}),0)+t)}(a,n)),"."),i.a.createElement(wa.a,{items:a,columns:Dr,layoutMode:Ca.e.justified,isHeaderVisible:!0,onShouldVirtualize:function(){return!1},selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained})))},Nr=function(){var e=Object(l.c)((function(e){return e.system.backups})).status,t=Object(u.g)(),a=t.path,n=t.url,r=Object(o.useState)(!0),s=Object(h.a)(r,2),c=s[0],m=s[1],d=e.backups,p=e.unmatchedFileSize,f=e.error,b=Object(Z.a)((function(e){m(!0)})),E=[{itemKey:n,headerText:"Backup Status"},{itemKey:"".concat(n,"/config"),headerText:"Backup Configuration"}];return Object(o.useEffect)((function(){f&&m(!1)}),[f]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ge.a,{hidden:c,dialogContentProps:{type:Le.a.largeHeader,title:"Backup error"},modalProps:{isBlocking:!0},minWidth:480,maxWidth:480},f,i.a.createElement(He.a,null,i.a.createElement(S.a,{text:"OK",onClick:b}))),i.a.createElement(Fa,{items:E}),i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:a},d&&d.length>0&&i.a.createElement(Mr,{backups:d,unmatchedFileSize:p}),!d&&i.a.createElement(aa,{messageBarType:g.a.warning},"Backups are turned off."),d&&!d.length&&i.a.createElement(aa,{messageBarType:g.a.warning},"No backups have been made yet.")),i.a.createElement(u.b,{exact:!0,path:"".concat(a,"/config")},i.a.createElement(Rr,{backups:d,unmatchedFileSize:p}))))},Br=function(){var e=Object(l.c)((function(e){return e.system.backups})),t=e.isGettingStatus,a=e.isGettingConfig,n=e.getStatusError,r=e.getConfigError,s=Object(l.b)();Object(o.useEffect)((function(){s(Er()),s(function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(lr()),e.prev=1,e.next=4,U.getSystemBackupConfig();case 4:a=e.sent,t(ur(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,mr);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[s]);var c=t||a,u=n||r;return i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"System",key:"system"},{text:"Backup Status",key:"backupstatus",as:"h1"}]})),i.a.createElement(f.a,{gap:"l1"},i.a.createElement(pe,null,i.a.createElement(te.a,null,"The box makes an incremental backup each night. By default the backup is stored on the machine itself, but you can also have it stored on Amazon S3.")),i.a.createElement(pe,null,u&&i.a.createElement(aa,{messageBarType:g.a.error,isMultiline:!0},u),c&&i.a.createElement(We.a,{label:"Checking backup status..."}),!c&&!u&&i.a.createElement(Nr,null))))};Br.path="/system/backup";var Pr=i.a.memo((function(e){var t=e.sslStatus,a=Object(l.b)(),n=Object(Z.a)((function(e){a(Yt({sslStatus:t,type:e}))}));return i.a.createElement(na.a,{menuIconProps:{iconName:"MoreVertical"},styles:{menuIcon:{fontWeight:"bold"}},role:"button","aria-haspopup":!0,"aria-label":"Show actions",menuProps:{directionalHint:Ua.a.bottomRightEdge,items:[{key:"installCertificate"+t.domain,text:"".concat(t.status===O.SSLStatusType.Success?"Replace":"Install"," Certificate"),onClick:function(){return n(wt.install)}}]}})})),Wr=Object(r.E)();var Ur,zr=[{key:"column1",name:"Domain",minWidth:300,maxWidth:300,isMultiline:!1,isRowHeader:!0,isResizable:!0,fieldName:"domain",onRender:function(e){return i.a.createElement(Fe.a,{href:"https://".concat(e.domain)},e.domain)}},{key:"column2",name:"Certificate Status",isMultiline:!0,isRowHeader:!0,minWidth:300,fieldName:"text",onRender:function(e){var t=function(e){switch(e){case O.SSLStatusType.Success:return Wr.palette.greenDark;case O.SSLStatusType.Danger:return Wr.palette.redDark;case O.SSLStatusType.NotApplicable:default:return Wr.semanticColors.bodyText}}(e.status);return i.a.createElement(te.a,{styles:{root:{color:t}}},e.text)}},{key:"column3",name:"Actions",isMultiline:!1,minWidth:50,onRender:function(e){return e.status===O.SSLStatusType.NotApplicable?null:i.a.createElement(Pr,{sslStatus:e})},className:Object(r.I)({displayName:"DetailsRow-actions-cell"})}],Lr=function(e){var t=e.items,a=Object(me.a)(e,["items"]),n=Object($.useMediaQuery)({minWidth:r.m});return i.a.createElement(f.a,Object.assign({as:"section"},a),i.a.createElement(aa,{truncated:!n,isMultiline:n},"Certificates expire after a period of time. All certificates will be automatically renewed through",i.a.createElement(Fe.a,{href:"https://letsencrypt.org/"},"Let's Encrypt")," 14 days prior to expiration."),i.a.createElement(wa.a,{items:t,columns:zr,layoutMode:Ca.e.justified,isHeaderVisible:!0,selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained,useReducedRowRenderer:!0,onRenderRow:function(e){return e?i.a.createElement(ja.a,Object.assign({},e,{styles:{root:{animation:"none"}}})):null}}))},Gr=a(133),Hr=a(279),Fr=a(131),qr=function(e){var t=Object(oa.a)(!1),a=Object(h.a)(t,2),n=a[0],r=a[1].toggle,o=Object(ia.a)("description"),s=Object(ia.a)("iconButton");return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{horizontal:!0,verticalAlign:"center"},null===e||void 0===e?void 0:e.defaultRender(e),i.a.createElement(na.a,{id:s,title:"Info",ariaLabel:"Info",iconProps:{iconName:"Info"},onClick:r})),n&&i.a.createElement(ra.a,{target:"#"+s,setInitialFocus:!0,onDismiss:r,ariaDescribedBy:o,role:"alertdialog",styles:{root:{maxWidth:320}}},i.a.createElement(f.a,{horizontalAlign:"start",padding:"m",gap:"m"},i.a.createElement(te.a,null,e.calloutText))))},Kr={type:Le.a.largeHeader,title:"TLS Certificate Installation"},Vr={isBlocking:!0},Xr={domain:"",cert:"",chain:""},Yr=/^OK($|\n)/,Qr=function(e){var t=e.domain,a=e.countryCode,n=Object(me.a)(e,["domain","countryCode"]),r=Object(l.c)((function(e){return e.ssl})),s=r.isGeneratingCSR,c=r.generateCSRError,u=r.generateCSRResponse,m=r.isInstallingCertificate,d=r.installCertificateError,E=r.installCertificateResponse,y=Object(l.b)(),v=Object(o.useState)(Object(p.a)(Object(p.a)({},Xr),{},{domain:t})),O=Object(h.a)(v,2),A=O[0],C=O[1],x=Object(o.useState)(!0),k=Object(h.a)(x,2),R=k[0],I=k[1],T=Object(o.useState)(!1),D=Object(h.a)(T,2),M=D[0],N=D[1],B=Object(Z.a)((function(e){I(!0)}));Object(o.useEffect)((function(){E&&R&&!M&&I(!1)}),[E,M,R]),Object(o.useEffect)((function(){R||N(!0)}),[R]),Object(o.useEffect)((function(){y(function(e,t){return function(){var a=Object(w.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(zt()),a.prev=1,a.next=4,z.generateSSLCSR({domain:e,countrycode:t});case 4:r=a.sent,n(Lt(r)),a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(1),a.next=12,X(a.t0,n,Gt);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))}),[a,t,y]);var P=c||d,W=Yr.test(E||"")?"Certificate has been installed. Check that you have no connection problems to the domain.":E;return i.a.createElement(f.a,n,i.a.createElement(Ge.a,{hidden:R,dialogContentProps:Kr,modalProps:Vr,minWidth:480,maxWidth:480,onDismissed:function(){Yr.test(E||"")&&(C(Object(p.a)(Object(p.a)({},Xr),{},{domain:t})),y(Jt())),y(Vt()),N(!1)}},i.a.createElement(te.a,null,W),i.a.createElement(He.a,null,i.a.createElement(S.a,{text:"OK",onClick:B}))),P&&i.a.createElement(fe.a,{messageBarType:g.a.error,isMultiline:!0},P),s&&i.a.createElement(We.a,{label:"Generating CSR..."}),!s&&u&&i.a.createElement(f.a,{gap:"m",as:"form",onSubmit:function(e){var t;e.preventDefault(),y((t=A,function(){var e=Object(w.a)(j.a.mark((function e(a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Ft()),e.prev=1,e.next=4,z.installSSLCertificate(t);case 4:n=e.sent,a(qt(n)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,a,Kt);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}},i.a.createElement(te.a,null,"You will need to provide the certificate provider this Certificate Signing Request (CSR):"),i.a.createElement(fe.a,{messageBarType:g.a.info,isMultiline:!0},"The CSR is safe to share. It can only be used in combination with a secret key stored on this machine."),i.a.createElement(ya,null,u),i.a.createElement(te.a,null,"The certificate provider will then provide you with a TLS/SSL certificate. They may also provide you with an intermediate chain. Paste each separately into the boxes below:"),i.a.createElement(b.a,{label:"TLS/SSL certificate:",multiline:!0,rows:6,placeholder:"-----BEGIN CERTIFICATE-----\nstuff here\n-----END CERTIFICATE-----",value:A.cert,onChange:function(e,t){C(Object(p.a)(Object(p.a)({},A),{},{cert:null!==t&&void 0!==t?t:""}))},required:!0}),i.a.createElement(b.a,{label:"TLS/SSL intermediate chain (if provided):",multiline:!0,rows:6,placeholder:"-----BEGIN CERTIFICATE-----\nstuff here\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nmore stuff here\n-----END CERTIFICATE-----",value:A.chain,onChange:function(e,t){C(Object(p.a)(Object(p.a)({},A),{},{chain:null!==t&&void 0!==t?t:""}))}}),i.a.createElement(f.a,{horizontal:!0},i.a.createElement(S.a,{type:"submit",disabled:m},"Install Certificate"))))},Jr=Object(Fr.getCodeList)(),Zr=Object.keys(Jr).map((function(e){return{key:e.toUpperCase(),text:Jr[e]}})).sort((function(e,t){return e.text.localeCompare(t.text)})),_r=Object(r.I)({flexBasis:0}),$r={label:{selectors:{":after":{paddingRight:0}}}},eo=function(e){return function(t,a){return t&&a?i.a.createElement(qr,Object.assign({},t,{calloutText:e,defaultRender:a})):null}},to={domain:"",country:""},ao=function(e){var t,a=e.items,n=Object(me.a)(e,["items"]),s=Object(l.c)((function(e){return e.ssl})).sslAction,c=_(Object(p.a)(Object(p.a)({},to),{},{domain:(null===s||void 0===s||null===(t=s.sslStatus)||void 0===t?void 0:t.domain)||""})),u=c.inputs,m=c.setInputs,d=Object(l.b)(),h=Object($.useMediaQuery)({minWidth:r.m}),b=function(e){return function(t,a){a&&(d(Ht()),m(Object(p.a)(Object(p.a)({},u),{},Object(J.a)({},e,a))))}},E=Object(o.useMemo)((function(){return eo("A multi-domain or wildcard certificate will be automatically applied to any domains it is valid for besides the one you choose above.")}),[]),y=Object(o.useMemo)((function(){return eo("This is required by some TLS certificate providers. You may leave this blank if you know your TLS certificate provider doesn't require it.")}),[]);return i.a.createElement(f.a,Object.assign({as:"section",gap:"m"},n),i.a.createElement(aa,{messageBarType:g.a.info,isMultiline:h,truncated:!h},"If you don't want to use our automatic Let's Encrypt integration, you can give any other certificate provider a try. You can generate the needed CSR below."),i.a.createElement(f.a,{horizontal:h,gap:h?"l2":"m"},i.a.createElement(f.a,{gap:"m",grow:1,className:_r},i.a.createElement(Gr.a,{placeholder:"Select a domain",label:"Which domain are you getting a certificate for?",options:a.map((function(e){var t=e.domain;return{key:t,text:t}})),required:!0,allowFreeform:!0,autoComplete:"on",selectedKey:u.domain,onRenderLabel:E,onChange:b("domain"),styles:$r}),u.domain&&i.a.createElement(Hr.a,{placeholder:"Select a country",label:"What country are you in?",options:Zr,onRenderLabel:y,allowFreeform:!0,autoComplete:"on",selectedKey:u.country,onChange:b("country"),styles:$r,dropdownMaxWidth:300,useComboBoxAsMenuWidth:!0})),i.a.createElement(f.a,{grow:2,className:_r},u.domain&&u.country&&i.a.createElement(Qr,{domain:u.domain,countryCode:u.country}))))};!function(e){e.status="",e.install="/install"}(Ur||(Ur={}));var no,ro=function(){var e=Object(l.c)((function(e){return e.ssl})),t=e.sslStatus,a=e.sslAction,n=t.status,r=Object(l.b)(),s=Object(u.f)(),c=Object(u.e)(),m=Object(u.g)(),d=m.path,p=m.url,f=[{itemKey:p,headerText:"Certificate Status"},{itemKey:"".concat(p).concat(Ur.install),headerText:"Install Custom Certificate"}];return Object(o.useEffect)((function(){(null===a||void 0===a?void 0:a.type)===wt.install&&c.push("".concat(p).concat(Ur.install))}),[c,a,p]),Object(o.useEffect)((function(){s.pathname===p&&r(Xt())}),[r,s.pathname,p]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Fa,{items:f}),i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:d},i.a.createElement(Lr,{items:n})),i.a.createElement(u.b,{exact:!0,path:"".concat(d).concat(Ur.install)},i.a.createElement(ao,{items:n}))))},oo=function(){var e=Object(l.c)((function(e){return e.ssl})),t=e.isGettingStatus,a=e.getStatusError,n=e.sslStatus,r=Object(l.b)();return Object(o.useEffect)((function(){n.status.length||r(Jt())}),[r,n.status.length]),i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"System",key:"system"},{text:"TLS (SSL) Certificates",key:"certificates",as:"h1"}]})),i.a.createElement(f.a,{gap:"l1"},i.a.createElement(pe,null,i.a.createElement(te.a,null,"A TLS (formerly called SSL) certificate is a cryptographic file that proves to anyone connecting to a web address that the connection is secure between you and the owner of that address."),i.a.createElement(te.a,null,"You need a TLS certificate for this box\u2019s hostname (",Q.hostname,") (TODO) and every other domain name and subdomain that this box is hosting a website for (see the list below).")),i.a.createElement(pe,null,a&&i.a.createElement(fe.a,{messageBarType:g.a.error,isMultiline:!0},a),t&&i.a.createElement(We.a,{label:"Checking certificate status..."}),!t&&!a&&i.a.createElement(ro,null))))};oo.path="/system/ssl";var io=(no={},Object(J.a)(no,O.DNSRecordType.A,{hint:"Enter an IPv4 address (i.e. a dotted quad, such as 123.456.789.012).  The 'local' alias sets the record to this box's public IPv4 address.",text:"A (IPv4 address)"}),Object(J.a)(no,O.DNSRecordType.AAAA,{hint:"Enter an IPv6 address.  The 'local' alias sets the record to this box's public IPv6 address.",text:"AAAA (IPv6 address)"}),Object(J.a)(no,O.DNSRecordType.CAA,{hint:"Enter a CA that can issue certificates for this domain in the form of FLAG TAG VALUE. (0 issuewild &quot;letsencrypt.org&quot;)",text:"CAA (Certificate Authority Authorization)"}),Object(J.a)(no,O.DNSRecordType.CNAME,{hint:"Enter another domain name followed by a period at the end (e.g. mypage.github.io.).",text:"CNAME (DNS forwarding)"}),Object(J.a)(no,O.DNSRecordType.TXT,{hint:"Enter arbitrary text.",text:"TXT (text record)"}),Object(J.a)(no,O.DNSRecordType.MX,{hint:"Enter record in the form of PRIORITY DOMAIN., including trailing period (e.g. 20 mx.example.com.).",text:"MX (mail exchanger)"}),Object(J.a)(no,O.DNSRecordType.SRV,{hint:"Enter record in the form of PRIORITY WEIGHT PORT TARGET., including trailing period (e.g. 10 10 5060 sip.example.com.).",text:"SRV (service record)"}),Object(J.a)(no,O.DNSRecordType.SSHFP,{hint:"Enter record in the form of ALGORITHM TYPE FINGERPRINT.",text:"SSHFP (SSH fingerprint record)"}),Object(J.a)(no,O.DNSRecordType.NS,{hint:"Enter a hostname to which this subdomain should be delegated to.",text:"NS (DNS subdomain delegation)"}),no),so=Object.keys(io).map((function(e){return{key:e,text:io[e].text}})),co=Object(r.I)({flexBasis:0,minWidth:0}),lo=function(e){var t=Object.assign({},e),a=Object(l.c)((function(e){return e.dns})),n=a.isAddingCustomRecord,s=a.addCustomRecordResponse,c=a.addCustomRecordError,u=a.zones,m=Object(l.b)(),d=u.map((function(e){return{key:e,text:e}})),E=Object($.useMediaQuery)({minWidth:r.m}),y=_({type:so[0],zone:d[0],name:"",value:""}),v=y.inputs,O=y.setInputs,A=y.resetInputs,C=y.onInputChange,x=Object(o.useState)(!0),k=Object(h.a)(x,2),R=k[0],I=k[1],T=Object(o.useState)(!1),D=Object(h.a)(T,2),M=D[0],N=D[1],B=Object(Z.a)((function(e){I(!0)})),P=function(e){return function(t,a){a&&O(Object(p.a)(Object(p.a)({},v),{},Object(J.a)({},e,a)))}},W=Object(Z.a)((function(e){m(lt())}));return Object(o.useEffect)((function(){s&&R&&!M&&I(!1)}),[s,M,R]),Object(o.useEffect)((function(){R||N(!0)}),[R]),Object(o.useEffect)((function(){return function(){m(ut())}}),[m]),console.log("addCustomRecordError",c),i.a.createElement(f.a,null,i.a.createElement(Ge.a,{hidden:R,dialogContentProps:{type:Le.a.largeHeader,title:"Custom DNS"},modalProps:{isBlocking:!0},minWidth:480,maxWidth:480,onDismissed:function(){s&&m(Rt()),m(ut()),N(!1),A()}},i.a.createElement(ya,null,s),i.a.createElement(He.a,null,i.a.createElement(S.a,{text:"OK",onClick:B}))),i.a.createElement(f.a,Object.assign({as:"section",gap:"l2",horizontal:E},t),i.a.createElement(f.a,{gap:"m",grow:1,className:co},i.a.createElement(te.a,null,"You can set additional DNS records, such as if you have a website running on another server, to add DKIM records for external mail providers, or for various confirmation-of-ownership tests.")),i.a.createElement(f.a,{gap:"m",grow:1,className:co,as:"form",onSubmit:function(e){e.preventDefault();var t,a=v.name?"".concat(v.name,".").concat(v.zone.key):v.zone.key;m((t={qname:a,rtype:v.type.key,body:v.value},function(){var e=Object(w.a)(j.a.mark((function e(a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(it()),e.prev=1,e.next=4,L.addDnsCustomRecord(t);case 4:n=e.sent,a(st(n)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,a,ct);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}},c&&i.a.createElement(aa,{messageBarType:g.a.error,isMultiline:!1,onDismiss:W,dismissButtonAriaLabel:"Close"},c),i.a.createElement(An.a,{label:"Domain",required:!0,options:d,selectedKey:v.zone.key,onChange:P("zone")}),i.a.createElement(b.a,{label:"Name",placeholder:"subdomain",value:v.name,name:"name",onChange:C}),i.a.createElement(An.a,{label:"Type",required:!0,options:so,selectedKey:v.type.key,onChange:P("type")}),i.a.createElement(b.a,{label:"Value",required:!0,value:v.value,name:"value",onChange:C}),i.a.createElement(aa,null,io[v.type.key].hint),i.a.createElement(f.a,{horizontal:!0},i.a.createElement(S.a,{type:"submit",disabled:n},"Save Record")))))},uo=function(){var e,t,a=Object(l.c)((function(e){return e.dns})),n=a.isRemovingCustomRecord,r=a.dnsAction,o=a.removeCustomRecordError,s=a.removeCustomRecordResponse,c=Object(l.b)(),u=Object(Z.a)((function(){c(vt())}));return i.a.createElement(Na,{hidden:(null===r||void 0===r?void 0:r.type)!==ge.remove,isLoading:n,onDismiss:u,onDismissed:function(){s&&c(Rt()),c(yt())},onConfirm:function(){if(null===r||void 0===r?void 0:r.dnsRecord){var e=r.dnsRecord,t=e.qname,a=e.rtype,n=e.value;c((o={qname:t,rtype:a,body:n},function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(gt()),e.prev=1,e.next=4,L.removeDnsCustomRecord(o);case 4:a=e.sent,t(bt(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,Et);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}var o},error:o,actionResponse:s,confirmButtonText:"Remove Record",dialogContentProps:{type:Le.a.largeHeader,title:"Remove DNS Record"},modalProps:{isBlocking:!0},minWidth:480},i.a.createElement(te.a,null,"Are you sure you want to remove the custom record:"),i.a.createElement(ya,null,null===r||void 0===r||null===(e=r.dnsRecord)||void 0===e?void 0:e.qname,"\xa0(",null===r||void 0===r||null===(t=r.dnsRecord)||void 0===t?void 0:t.rtype,")"))},mo=i.a.memo((function(e){var t=e.dnsRecord,a=Object(l.b)(),n=Object(Z.a)((function(e){a(St({dnsRecord:t,type:e}))}));return i.a.createElement(na.a,{menuIconProps:{iconName:"MoreVertical"},styles:{menuIcon:{fontWeight:"bold"}},role:"button","aria-haspopup":!0,"aria-label":"Show actions",menuProps:{directionalHint:Ua.a.bottomRightEdge,items:[{key:"removeDnsRecord"+t.qname+t.rtype,text:"Remove",onClick:function(){return n(ge.remove)}}]}})})),po=[{key:"column1",name:"Domain Name",minWidth:200,maxWidth:300,isMultiline:!0,isRowHeader:!0,fieldName:"qname"},{key:"column2",name:"Record Type",minWidth:100,maxWidth:100,isMultiline:!1,onRender:function(e){return i.a.createElement(te.a,null,e.rtype)}},{key:"column3",name:"Value",minWidth:180,isMultiline:!0,onRender:function(e){return i.a.createElement(te.a,null,e.value)}},{key:"column4",name:"Actions",isMultiline:!1,minWidth:50,onRender:function(e){return i.a.createElement(mo,{dnsRecord:e})},className:Object(r.I)({displayName:"DetailsRow-actions-cell"})}],fo=function(e){var t=e.openedGroupsState,a=Object(me.a)(e,["openedGroupsState"]),n=Object(l.c)(Ct),r=Object(h.a)(n,2),o=r[0],s=r[1];return i.a.createElement(f.a,Object.assign({as:"section"},a),i.a.createElement(uo,null),i.a.createElement(Ia,{items:o,columns:po,groups:s,openedGroupsState:t}))},ho=Object(r.I)({flexBasis:0}),go=function(e){var t=Object.assign({},e),a=Object(l.c)((function(e){return e.dns})),n=a.isAddingSecondaryNameserver,s=a.addSecondaryNameserverError,c=a.addSecondaryNameserverResponse,u=Object(l.b)(),m=Object($.useMediaQuery)({minWidth:r.m}),d=Object(o.useState)(""),p=Object(h.a)(d,2),E=p[0],y=p[1],v=Object(o.useState)(!0),O=Object(h.a)(v,2),A=O[0],C=O[1],x=Object(o.useState)(!1),k=Object(h.a)(x,2),R=k[0],I=k[1],T=Object(Z.a)((function(e){C(!0)})),D=Object(Z.a)((function(e){u(ft())})),M=Object(Z.a)((function(e,t){y(t||"")}));return Object(o.useEffect)((function(){c&&A&&!R&&C(!1)}),[c,R,A]),Object(o.useEffect)((function(){A||I(!0)}),[A]),Object(o.useEffect)((function(){return function(){u(ht())}}),[u]),i.a.createElement(f.a,Object.assign({as:"section",gap:"l2",horizontal:m},t),i.a.createElement(Ge.a,{hidden:A,dialogContentProps:{type:Le.a.largeHeader,title:"Custom DNS"},modalProps:{isBlocking:!0},minWidth:480,maxWidth:480,onDismissed:function(){c&&u(kt()),u(ht())}},i.a.createElement(ya,null,c),i.a.createElement(He.a,null,i.a.createElement(S.a,{text:"OK",onClick:T}))),i.a.createElement(f.a,{gap:"m",grow:1,className:ho},i.a.createElement(te.a,null,"If your TLD requires you to have two separate nameservers, you can either set up external DNS and ignore the DNS server on this box entirely, or use the DNS server on this box but add a secondary (aka \u201cslave\u201d) nameserver."),i.a.createElement(te.a,null,"If you choose to use a secondary nameserver, you must find a secondary nameserver service provider. Your domain name registrar or virtual cloud provider may provide this service for you. Once you set up the secondary nameserver service, enter the hostname (not the IP address) of their secondary nameserver in field.")),i.a.createElement(f.a,{gap:"m",grow:1,className:ho,as:"form",onSubmit:function(e){var t;e.preventDefault(),u((t={hostnames:E},function(){var e=Object(w.a)(j.a.mark((function e(a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(mt()),e.prev=1,e.next=4,L.addDnsSecondaryNameserver(t);case 4:n=e.sent,a(dt(n)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,a,pt);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}},s&&i.a.createElement(aa,{messageBarType:g.a.error,isMultiline:!1,onDismiss:D,dismissButtonAriaLabel:"Close"},s),i.a.createElement(aa,null,"Multiple secondary servers can be separated with commas or spaces (i.e., ns2.hostingcompany.com ns3.hostingcompany.com)."),i.a.createElement(aa,null,"To enable zone transfers to additional servers without listing them as secondary nameservers, add an IP address or subnet using xfr:10.20.30.40 or xfr:10.20.30.40/24."),i.a.createElement(b.a,{label:"Hostname",required:!0,placeholder:"ns1.cloudprovider.com",value:E,onChange:M}),i.a.createElement(f.a,{horizontal:!0},i.a.createElement(S.a,{type:"submit",disabled:n},"Update"))))},bo=function(){var e=Object(l.c)((function(e){return e.dns})),t=e.isGettingSecondaryNameserver,a=e.isGettingZones,n=e.isGettingCustomRecords,r=e.getSecondaryNameserverError,s=e.getZonesError,c=e.getCustomRecordsError,m=e.zones,d=e.customRecords,p=Object(l.b)(),f=Object(u.g)(),h=f.path,b=f.url,E=Object(o.useState)([]),y=[{itemKey:b,headerText:"DNS Records"},{itemKey:"".concat(b,"/add"),headerText:"Add Custom Record"},{itemKey:"".concat(b,"/nameserver"),headerText:"Secondary Nameserver"}];return Object(o.useEffect)((function(){m.length||p(function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ze()),e.prev=1,e.next=4,L.getDnsZones();case 4:a=e.sent,t(_e(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,$e);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[p,m]),Object(o.useEffect)((function(){d.length||p(Rt())}),[d,p]),Object(o.useEffect)((function(){p(kt())}),[p]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Fa,{items:y}),i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:h},i.a.createElement(ze,null,n&&i.a.createElement(Ue,{loadingLabel:"Checking DNS status...",hasLoaded:Boolean(d.length)}),Boolean(c)&&i.a.createElement(fe.a,{messageBarType:g.a.error},c),!c&&Boolean(d.length)&&i.a.createElement(fo,{openedGroupsState:E}))),i.a.createElement(u.b,{exact:!0,path:"".concat(h,"/add")},a&&i.a.createElement(We.a,{label:"Checking Zones..."}),Boolean(s)&&i.a.createElement(fe.a,{messageBarType:g.a.error},s),!s&&Boolean(m.length)&&i.a.createElement(lo,null)),i.a.createElement(u.b,{exact:!0,path:"".concat(h,"/nameserver")},t&&i.a.createElement(We.a,{label:"Checking Secondary Nameserver..."}),Boolean(r)&&i.a.createElement(fe.a,{messageBarType:g.a.error},r),!r&&!t&&i.a.createElement(go,null))))},Eo=function(){return i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"System",key:"system"},{text:"Custom DNS",key:"customdns",as:"h1"}]})),i.a.createElement(f.a,{gap:"l1"},i.a.createElement(fe.a,{messageBarType:g.a.warning,isMultiline:!0},"This is an advanced configuration page."),i.a.createElement(pe,null,i.a.createElement(te.a,null,"It is possible to set custom DNS records on domains hosted here.")),i.a.createElement(pe,null,i.a.createElement(bo,null))))};Eo.path="/dns/custom";var yo=function(e){var t=e.text,a=e.maxWidth,n=void 0===a?320:a,r=e.showCloseButton,o=void 0===r||r,s=e.iconButtonClassName,c=e.iconButtonStyles,l=Object(oa.a)(!1),u=Object(h.a)(l,2),m=u[0],d=u[1].toggle,p=Object(ia.a)("iconButton");return i.a.createElement(i.a.Fragment,null,i.a.createElement(na.a,{id:p,title:"Info",text:"Info",ariaLabel:"Info",iconProps:{iconName:"Info"},onClick:d,className:s,styles:c}),m&&i.a.createElement(ra.a,{target:"#"+p,setInitialFocus:!0,onDismiss:d,role:"alertdialog",styles:{root:{maxWidth:n}}},i.a.createElement(f.a,{horizontalAlign:"start",padding:"m",gap:"m"},i.a.createElement(te.a,null,t),o&&i.a.createElement(Ta.a,{onClick:d},"Close"))))},vo=[{key:"column1",name:"Qname",minWidth:260,maxWidth:300,isMultiline:!1,isRowHeader:!0,isPadded:!1,fieldName:"qname"},{key:"column2",name:"Record Type",minWidth:80,maxWidth:100,isPadded:!1,isMultiline:!1,fieldName:"rtype",onRender:function(e){return i.a.createElement(te.a,null,e.rtype)}},{key:"column3",name:"Value",isMultiline:!0,minWidth:280,isPadded:!0,fieldName:"value",onRender:function(e){return i.a.createElement(te.a,null,e.value)}},{key:"column4",name:"Info",isMultiline:!1,minWidth:40,isIconOnly:!0,isPadded:!1,onRender:function(e){return i.a.createElement(yo,{text:e.explanation,showCloseButton:!1,iconButtonStyles:{root:{height:"auto"},icon:{fontSize:r.e.xLarge}}})},className:Object(r.I)({displayName:"DetailsRow-actions-cell"})}],So=function(e){var t=e.openedGroupsState,a=Object(me.a)(e,["openedGroupsState"]),n=Object(l.c)(xt),r=Object(h.a)(n,2),o=r[0],s=r[1];return i.a.createElement(f.a,Object.assign({as:"section"},a),i.a.createElement(Ia,{items:o,groups:s,columns:vo,openedGroupsState:t}))},Oo=a(302),Ao=Object(r.I)({flexBasis:0}),jo=function(e){var t=Object.assign({},e),a=Object($.useMediaQuery)({minWidth:r.m});return i.a.createElement(f.a,Object.assign({as:"section",gap:"l2",horizontal:a},t),i.a.createElement(f.a,{gap:"m",grow:1,className:Ao},i.a.createElement(te.a,null,"Use this tool to generate zone files."),i.a.createElement(An.a,{label:"Domain",required:!0,placeholder:"Select a domain",options:[{key:"foo",text:"box.proxima-mail"}]}),i.a.createElement(b.a,{label:"SOA Records",required:!0,multiline:!0,rows:5}),i.a.createElement(b.a,{label:"Nameservers",required:!0}),i.a.createElement(f.a,{gap:"s2"},i.a.createElement(Oo.a,null,"Generation Options"),i.a.createElement(E.a,{label:"Split long TXT entries",checked:!1})),i.a.createElement(f.a,{horizontal:!0},i.a.createElement(S.a,null,"Generate"))),i.a.createElement(f.a,{gap:"m",grow:2,className:Ao,style:{minWidth:0}},i.a.createElement(re.a,{styles:{root:{paddingLeft:0}},items:[{key:"copy",text:"Copy",iconProps:{iconName:"Copy"}},{key:"download",text:"Download",iconProps:{iconName:"Download"}}],ariaLabel:"Use left and right arrow keys to navigate between commands"}),i.a.createElement(ya,null,'$ORIGIN example.com.\n$TTL 1800\n\n@ IN SOA ns1.box.example.com. hostmaster.box.example.com. (\n           2020062800\n           7200\n           1800\n           1209600\n           1800\n           )\n\tIN\tNS\tns1.box.example.com.\n\tIN\tNS\tns2.box.example.com.\n\tIN\tA\t111.222.333.444\n\tIN\tAAAA\t1111:4f8:1c1c:e08a::2\n\tIN\tMX\t10 box.example.com.\n\tIN\tTXT\t"v=spf1 mx -all"\n_dmarc\tIN\tTXT\t"v=DMARC1; p=quarantine"\nmail._domainkey\tIN\tTXT\t"v=DKIM1; k=rsa; s=email; p=1234+56789"\n_caldavs._tcp\tIN\tSRV\t0 0 443 box.example.com.\n_carddavs._tcp\tIN\tSRV\t0 0 443 box.example.com.\nautoconfig\tIN\tA\t111.222.333.444\nautoconfig\tIN\tAAAA\t1111:2222:1c1c:e08a::1\nautodiscover\tIN\tA\t111.222.333.444\nautodiscover\tIN\tAAAA\t1111:2222:1c1c:e08a::1\nbox\tIN\tA\t111.222.333.444\nbox\tIN\tAAAA\t1111:2222:1c1c:e08a::1\nbox\tIN\tSSHFP\t3 2 ( 123456789 )\nbox\tIN\tSSHFP\t4 2 ( 123456789 )\nbox\tIN\tSSHFP\t1 2 ( 123456789 )\nbox\tIN\tMX\t10 box.example.com.\nbox\tIN\tTXT\t"v=spf1 mx -all"\n_dmarc.box\tIN\tTXT\t"v=DMARC1; p=quarantine"\nmail._domainkey.box\tIN\tTXT\t"v=DKIM1; k=rsa; s=email; p=1234+56789"\n_25._tcp.box\tIN\tTLSA\t3 1 1 123456789\n_443._tcp.box\tIN\tTLSA\t3 1 1 123456789\nautoconfig.box\tIN\tA\t111.222.333.444\nautoconfig.box\tIN\tAAAA\t1111:2222:1c1c:e08a::1\nautoconfig.box\tIN\tTXT\t"v=spf1 -all"\n_dmarc.autoconfig.box\tIN\tTXT\t"v=DMARC1; p=reject"\nautodiscover.box\tIN\tA\t111.222.333.444\nautodiscover.box\tIN\tAAAA\t1111:2222:1c1c:e08a::1\nautodiscover.box\tIN\tTXT\t"v=spf1 -all"\n_dmarc.autodiscover.box\tIN\tTXT\t"v=DMARC1; p=reject"\nns1.box\tIN\tA\t111.222.333.444\nns1.box\tIN\tAAAA\t1111:2222:1c1c:e08a::1\nns1.box\tIN\tTXT\t"v=spf1 -all"\n_dmarc.ns1.box\tIN\tTXT\t"v=DMARC1; p=reject"\nns2.box\tIN\tA\t111.222.333.444\nns2.box\tIN\tAAAA\t1111:2222:1c1c:e08a::1\nns2.box\tIN\tTXT\t"v=spf1 -all"\n_dmarc.ns2.box\tIN\tTXT\t"v=DMARC1; p=reject"\nwww\tIN\tA\t111.222.333.444\nwww\tIN\tAAAA\t1111:2222:1c1c:e08a::1\nwww\tIN\tTXT\t"v=spf1 -all"\n_dmarc.www\tIN\tTXT\t"v=DMARC1; p=reject"')))},wo=function(){var e=Object(u.g)(),t=e.path,a=e.url,n=Object(o.useState)([]),r=[{itemKey:a,headerText:"DNS Records"},{itemKey:"".concat(a,"/zone-file"),headerText:"Zone File Generator"}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Fa,{items:r}),i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:t},i.a.createElement(So,{openedGroupsState:n})),i.a.createElement(u.b,{exact:!0,path:"".concat(t,"/zone-file")},i.a.createElement(jo,null))))},Co=function(){var e=Object(l.c)((function(e){return e.dns})),t=e.isGettingDump,a=e.getDumpError,n=e.dump,s=Object(l.b)(),c=Object($.useMediaQuery)({minWidth:r.m});return Object(o.useEffect)((function(){n.length||s(It())}),[s,n.length]),i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"System",key:"system"},{text:"External DNS",key:"externaldns",as:"h1"}]})),i.a.createElement(f.a,{gap:"l1"},i.a.createElement(fe.a,{messageBarType:g.a.warning,isMultiline:!0},"This is an advanced configuration page."),i.a.createElement(pe,null,i.a.createElement(te.a,null,"Although your box is configured to serve its own DNS, it is possible to host your DNS elsewhere \u2014 such as in the DNS control panel provided by your domain name registrar or virtual cloud provider \u2014 by copying the DNS zone information shown in the table below into your external DNS server\u2019s control panel."),i.a.createElement(te.a,null,"If you do so, you are responsible for keeping your DNS entries up to date! If you previously enabled DNSSEC on your domain name by setting a DS record at your registrar, you will likely have to turn it off before changing nameservers."),i.a.createElement(fe.a,{messageBarType:g.a.info,isMultiline:c,truncated:!c},"You may encounter zone file errors when attempting to create a TXT record with a long string.",i.a.createElement(Fe.a,{href:"http://tools.ietf.org/html/rfc4408#section-3.1.3"},"RFC 4408")," ","states a TXT record is allowed to contain multiple strings, and this technique can be used to construct records that would exceed the 255-byte maximum length. You may need to adopt this technique when adding DomainKeys. Use a tool like",i.a.createElement(Fe.a,{href:"http://manpages.ubuntu.com/manpages/bionic/man8/named-checkzone.8.html"},i.a.createElement("code",null,"named-checkzone"))," ","to validate your zone file.")),i.a.createElement(pe,null,a&&i.a.createElement(fe.a,{messageBarType:g.a.error,isMultiline:!0},a),t&&i.a.createElement(We.a,{label:"Getting DNS dump..."}),!t&&!a&&i.a.createElement(wo,null))))};Co.path="/dns/external";var xo=Object(I.b)({name:"privacy",initialState:{isGettingPrivacy:!1,isUpdatingPrivacy:!1,status:!1,getPrivacyError:null,updatePrivacyError:null},reducers:{getPrivacyStart:function(e){e.getPrivacyError=null,e.isGettingPrivacy=!0},getPrivacySuccess:function(e,t){e.isGettingPrivacy=!1,e.status=t.payload},getPrivacyError:function(e,t){e.isGettingPrivacy=!1,e.getPrivacyError=t.payload},updatePrivacyStart:function(e){e.getPrivacyError=null,e.isUpdatingPrivacy=!0},updatePrivacySuccess:function(e,t){e.isUpdatingPrivacy=!1;var a=t.payload,n=a.result,r=a.privacy;"OK"===n&&(e.status=r)},updatePrivacyError:function(e,t){e.isUpdatingPrivacy=!1,e.updatePrivacyError=t.payload}}}),ko=xo.actions,Ro=ko.getPrivacySuccess,Io=ko.getPrivacyStart,To=ko.getPrivacyError,Do=ko.updatePrivacyStart,Mo=ko.updatePrivacySuccess,No=ko.updatePrivacyError,Bo=xo.reducer,Po=Object(I.b)({name:"reboot",initialState:{isGettingRebootStatus:!1,status:!1,getRebootStatusError:null},reducers:{getRebootStatusStart:function(e){e.getRebootStatusError=null,e.isGettingRebootStatus=!0},getRebootStatusSuccess:function(e,t){e.isGettingRebootStatus=!1,e.status=t.payload},getRebootStatusError:function(e,t){e.getRebootStatusError=t.payload,e.isGettingRebootStatus=!1}}}),Wo=Po.actions,Uo=Wo.getRebootStatusSuccess,zo=Wo.getRebootStatusStart,Lo=Wo.getRebootStatusError,Go=Po.reducer,Ho=a(45),Fo=Object(I.b)({name:"status",initialState:{isGettingStatus:!1,status:[],getStatusError:null},reducers:{getStatusStart:function(e){e.getStatusError=null,e.isGettingStatus=!0},getStatusSuccess:function(e,t){e.isGettingStatus=!1,e.status=t.payload},getStatusError:function(e,t){e.getStatusError=t.payload,e.isGettingStatus=!1}}}),qo=Fo.actions,Ko=qo.getStatusSuccess,Vo=qo.getStatusStart,Xo=qo.getStatusError,Yo=Fo.reducer,Qo=function(e){var t=[],a=[],n=void 0,r=e.system.status.status;return r.forEach((function(e,o){var i=e.type===O.StatusEntryType.Heading;i||a.push(Object(p.a)({key:"item"+a.length},e)),(i||o===r.length-1)&&n&&t.push(Object(p.a)(Object(p.a)({},n),{},{count:a.length-n.startIndex})),i&&(n={key:"group"+t.length,name:e.text,startIndex:a.length,isCollapsed:!1,level:0,count:0})})),[a,t]},Jo=Object(Ho.a)([Qo],(function(e){var t,a=Object(h.a)(e,1)[0],n=(t={},Object(J.a)(t,O.StatusEntryType.Ok,0),Object(J.a)(t,O.StatusEntryType.Warning,0),Object(J.a)(t,O.StatusEntryType.Error,0),Object(J.a)(t,"total",0),t);return a.forEach((function(e){switch(e.type!==O.StatusEntryType.Heading&&(n.total+=1),e.type){case O.StatusEntryType.Ok:n[O.StatusEntryType.Ok]+=1;break;case O.StatusEntryType.Error:n[O.StatusEntryType.Error]+=1;break;case O.StatusEntryType.Warning:n[O.StatusEntryType.Warning]+=1}})),n})),Zo=a(275),_o=a(293),$o=Object(r.E)();function ei(e){switch(e){case O.StatusEntryType.Ok:return"Accept";case O.StatusEntryType.Error:return"Error";case O.StatusEntryType.Warning:default:return"Warning"}}function ti(e){switch(e){case O.StatusEntryType.Ok:return $o.palette.green;case O.StatusEntryType.Error:return $o.palette.red;case O.StatusEntryType.Warning:default:return $o.palette.yellowDark}}var ai=function(e){var t=e.type;return i.a.createElement(_o.a,{iconName:ei(t),styles:{root:{color:ti(t),fontSize:r.e.medium,verticalAlign:"middle"}}})},ni=Object(r.E)();var ri,oi=Object(r.I)(Object(p.a)({},r.b.fadeIn500)),ii=function(e){var t=e.item,a=t.text,n=t.extra,r=t.type,s=Object(o.useState)(!0),c=Object(h.a)(s,2),l=c[0],u=c[1],m=Object(Z.a)((function(){return u(!1)})),d=function(e){switch(e){case O.StatusEntryType.Ok:return ni.palette.greenDark;case O.StatusEntryType.Error:return ni.palette.redDark;case O.StatusEntryType.Warning:default:return ni.palette.yellowDark}}(r);return i.a.createElement(i.a.Fragment,null,i.a.createElement(te.a,{styles:{root:{color:d}}},a),!(!n||!n.length)&&i.a.createElement(i.a.Fragment,null,l&&i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),i.a.createElement(Fe.a,{onClick:m},"Show more")),!l&&i.a.createElement(f.a,{padding:"m 0",className:oi},n.map((function(e){return i.a.createElement(i.a.Fragment,null,e.monospace?i.a.createElement(te.a,{block:!0,styles:{root:{padding:ni.spacing.m,fontFamily:"monospace"}}},e.text):i.a.createElement(te.a,{block:!0},e.text))})))))},si=[{key:"column1",name:"Status",minWidth:16,maxWidth:16,onRender:function(e){return i.a.createElement(ai,{type:e.type})}},{key:"column2",name:"Text",isRowHeader:!0,isMultiline:!0,minWidth:100,onRender:function(e){return i.a.createElement(ii,{item:e})}}],ci=function(e){var t=e.items,a=e.groups;return i.a.createElement(wa.a,{items:t,columns:si,groups:a,layoutMode:Ca.e.justified,isHeaderVisible:!1,onShouldVirtualize:function(){return!1},groupProps:{onRenderHeader:function(e,t){return t?t(Object(p.a)(Object(p.a)({},e),{},{styles:{headerCount:{display:"none"}}})):null},isAllGroupsCollapsed:!1,collapseAllVisibility:Zo.a.hidden},selectionMode:xa.b.none,constrainMode:Ca.d.horizontalConstrained})},li=a(309),ui=a(76),mi=a(305),di=Object(r.E)(),pi={gapSpace:0},fi={root:{width:"100%"}},hi=function(e){var t=i.a.createElement(li.a,{role:"menuitem","aria-label":e.name,styles:{root:Object(p.a)({padding:di.spacing.m,textAlign:"left"},fi.root)},disabled:e.disabled,iconProps:{iconName:e.icon},text:e.name,onClick:e.onClick});return e.tooltip?i.a.createElement(Xa.a,{content:e.tooltip,id:e.tooltipId,calloutProps:pi,styles:fi,delay:ui.a.zero,directionalHint:Ua.a.topCenter},t):t},gi=function(){return null},bi=function(){var e=Object(l.c)((function(e){return e.system.privacy})),t=e.isUpdatingPrivacy,a=e.status,n=Object(l.c)((function(e){return e.system.reboot})).status,r=Object(l.b)();return i.a.createElement(mi.a,{role:"menubar",vertical:!0,styles:{root:{width:"100%",boxShadow:di.effects.elevation4,backgroundColor:di.palette.white}},items:[{key:"item1",icon:"DisableUpdates",name:"".concat(a?"Enable":"Disable"," New-Version Check"),tooltip:a?"When enabled, status checks phone-home to check for a new release of Mail-in-a-Box.":null,tooltipId:Object(ia.a)("tooltip"),disabled:t,onClick:function(){var e;r((e=!a,function(){var t=Object(w.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Do()),t.prev=1,t.next=4,U.updateSystemPrivacy({value:e?O.SystemPrivacyStatus.Private:O.SystemPrivacyStatus.Off});case 4:n=t.sent,a(Mo({result:n,privacy:e})),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,X(t.t0,a,No);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()))}},{key:"item2",icon:"Sync",name:"Reboot Server",disabled:!n}],onRenderOverflowButton:gi,onRenderItem:hi})},Ei=function(){var e=Object(l.c)((function(e){return e.system.reboot})).status;return i.a.createElement(i.a.Fragment,null,!e&&i.a.createElement(fe.a,{messageBarType:g.a.success},"No reboot is necessary."),e&&i.a.createElement(fe.a,{messageBarType:g.a.warning},"A reboot is required."),i.a.createElement(bi,null))},yi=a(280),vi=function(){var e=Object(l.c)(Jo),t={chartTitle:"Status Checks",chartData:[{legend:"Passed",data:e[O.StatusEntryType.Ok],color:Object(r.E)().palette.green,xAxisCalloutData:"Passed checks"},{legend:"Failed",data:e[O.StatusEntryType.Error],color:Object(r.E)().palette.red,xAxisCalloutData:"Failed checks"},{legend:"Warning",data:e[O.StatusEntryType.Warning],color:Object(r.E)().palette.yellow,xAxisCalloutData:"Warning checks"}]};return i.a.createElement(yi.a,{data:t,innerRadius:30,legendsOverflowText:"overflow checks",legendsOverflowProps:{vertical:!1,overflowSide:"start"},hideLegend:!1,height:116,width:230})},Si=Object(r.I)(Object(p.a)({},r.b.fadeIn500)),Oi=function(){var e=Object(l.c)((function(e){return e.system.status})),t=e.isGettingStatus,a=e.getStatusError,n=Object(l.b)(),s=Object($.useMediaQuery)({minWidth:r.m}),c=Object(l.c)(Qo),u=Object(h.a)(c,2),m=u[0],d=u[1];return Object(o.useEffect)((function(){n(function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Vo()),e.prev=1,e.next=4,U.getSystemStatus();case 4:a=e.sent,t(Ko(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,Xo);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),n(function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(zo()),e.prev=1,e.next=4,U.getSystemRebootStatus();case 4:a=e.sent,t(Uo(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,Lo);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),n(function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Io()),e.prev=1,e.next=4,U.getSystemPrivacyStatus();case 4:a=e.sent,t(Ro(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,To);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[n]),i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:s,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"System",key:"system"},{text:"Status Checks",key:"statuschecks",as:"h1"}]})),i.a.createElement(f.a,{gap:"l1"},!t&&!a&&i.a.createElement(f.a,{horizontal:s,gap:"l1"},i.a.createElement(pe,{grow:1,styles:{root:{flexBasis:0}}},i.a.createElement(vi,null)),i.a.createElement(pe,{grow:1,styles:{root:{flexBasis:0}},horizontalAlign:"start"},i.a.createElement(Ei,null))),i.a.createElement(pe,null,a&&i.a.createElement(fe.a,{messageBarType:g.a.error,isMultiline:!0,className:Si},a),t&&i.a.createElement(We.a,{label:"Checking system status..."}),!t&&!a&&i.a.createElement(ci,{items:m,groups:d}))))};Oi.path="/system/status",function(e){e[e.update=0]="update"}(ri||(ri={}));var Ai=Object(I.b)({name:"web",initialState:{isGettingDomains:!1,domains:[],getDomainsError:null,domainAction:null,isUpdatingWeb:!1,updateWebError:null,updateWebResponse:null},reducers:{getDomainsStart:function(e){e.getDomainsError=null,e.isGettingDomains=!0},getDomainsSuccess:function(e,t){e.isGettingDomains=!1,e.domains=t.payload},getDomainsError:function(e,t){e.isGettingDomains=!1,e.getDomainsError=t.payload},updateWebStart:function(e){e.updateWebError=null,e.isUpdatingWeb=!0},updateWebSuccess:function(e,t){e.isUpdatingWeb=!1,e.updateWebResponse=t.payload},updateWebError:function(e,t){e.isUpdatingWeb=!1,e.updateWebError=t.payload},updateWebReset:function(e){e.isUpdatingWeb=!1,e.updateWebError=null,e.updateWebResponse=null},resetDomainAction:function(e){e.domainAction=Object(p.a)(Object(p.a)({},e.domainAction),{},{action:void 0})},setDomainAction:function(e,t){e.domainAction=t.payload}}}),ji=Ai.reducer,wi=Ai.actions,Ci=wi.getDomainsStart,xi=wi.getDomainsSuccess,ki=wi.getDomainsError,Ri=wi.resetDomainAction,Ii=wi.setDomainAction,Ti=wi.updateWebStart,Di=wi.updateWebSuccess,Mi=wi.updateWebError,Ni=wi.updateWebReset;function Bi(e,t){return e.domainWithoutSubDomain===t.domainWithoutSubDomain?e.subDomain.localeCompare(t.subDomain):e.domainWithoutSubDomain.localeCompare(t.domainWithoutSubDomain)}var Pi=function(e){var t=e.web.domains.filter((function(e){return e.staticEnabled})).map((function(e){var t=Ke.a.parse(e.domain);return Object(p.a)(Object(p.a)({},e),{},{domainWithoutSubDomain:!t.error&&t.domain||"",subDomain:!t.error&&t.subdomain||""})})).sort(Bi),a=[];return t.forEach((function(e,t){var n,r=e.domainWithoutSubDomain;(null===(n=a[a.length-1])||void 0===n?void 0:n.name)!==r&&a.push({key:"group"+a.length,name:r,startIndex:t,level:0,count:0,isCollapsed:!0})})),a=a.map((function(e,n){var r;return Object(p.a)(Object(p.a)({},e),{},{count:((null===(r=a[n+1])||void 0===r?void 0:r.startIndex)||t.length)-e.startIndex})})),[t,a]},Wi=function(){var e,t,a=Object(l.c)((function(e){return e.web})),n=a.domainAction,r=a.updateWebError,o=a.updateWebResponse,s=a.isUpdatingWeb,c=Object(l.b)(),u=Object(Z.a)((function(){c(Ri())})),m=Object(Z.a)((function(){c(Ni())})),d=o?420:580;return i.a.createElement(Na,{hidden:(null===n||void 0===n?void 0:n.action)!==ri.update,isLoading:s,minWidth:d,maxWidth:d,onDismiss:u,onDismissed:m,onConfirm:function(){(null===n||void 0===n?void 0:n.webDomain)&&c(function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ti()),e.prev=1,e.next=4,H.updateWeb();case 4:a=e.sent,t(Di(a||"Nothing changed.")),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,Mi);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},error:r,actionResponse:o,confirmButtonText:"Update",dialogContentProps:{type:Le.a.largeHeader,title:"Change Root Directory"},modalProps:{isBlocking:!0}},i.a.createElement(te.a,null,"You can change the static directory for"," ",i.a.createElement("strong",null,null===n||void 0===n||null===(e=n.webDomain)||void 0===e?void 0:e.domain)," to:"),i.a.createElement(te.a,null,i.a.createElement("code",null,null===n||void 0===n||null===(t=n.webDomain)||void 0===t?void 0:t.customRoot)),i.a.createElement(te.a,null,"First create this directory on the server. Then click Update to scan for the directory and update web settings."))},Ui=i.a.memo((function(e){var t=e.webDomain,a=Object(l.b)(),n=Object(Z.a)((function(e){a(Ii({webDomain:t,action:e}))}));return i.a.createElement(na.a,{menuIconProps:{iconName:"MoreVertical"},styles:{menuIcon:{fontWeight:"bold"}},role:"button","aria-haspopup":!0,"aria-label":"Show actions",menuProps:{directionalHint:Ua.a.bottomRightEdge,items:[{key:"changeroot",text:"Change Root Directory",onClick:function(){return n(ri.update)}}]}})})),zi=[{key:"column1",name:"Site",minWidth:300,isRowHeader:!0,onRender:function(e){return i.a.createElement(Fe.a,{href:"https://".concat(e.domain)},"https://",e.domain)}},{key:"column2",name:"Directory for Files",minWidth:300,isRowHeader:!1,onRender:function(e){return i.a.createElement(te.a,null,e.root)}},{key:"column3",name:"Actions",isMultiline:!1,minWidth:50,onRender:function(e){return i.a.createElement(Ui,{webDomain:e})},className:Object(r.I)({displayName:"DetailsRow-actions-cell"})}],Li=function(e){var t=e.openedGroupsState,a=Object(me.a)(e,["openedGroupsState"]),n=Object(l.c)((function(e){return e.web})),s=n.isGettingDomains,c=n.getDomainsError,u=Object(l.b)(),m=Object(l.c)(Pi),d=Object(h.a)(m,2),p=d[0],b=d[1],E=Object($.useMediaQuery)({minWidth:r.m});return Object(o.useEffect)((function(){p.length||s||c||u(function(){var e=Object(w.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ci()),e.prev=1,e.next=4,H.getWebDomains();case 4:a=e.sent,t(xi(a)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,X(e.t0,t,ki);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[u,p,c,s]),i.a.createElement(f.a,a,i.a.createElement(Wi,null),c&&i.a.createElement(aa,{messageBarType:g.a.error},c),i.a.createElement(ze,null,s&&i.a.createElement(Ue,{loadingLabel:"Loading domains...",hasLoaded:Boolean(p.length)}),!s&&!c&&i.a.createElement(f.a,{gap:"m"},i.a.createElement(aa,{isMultiline:E,truncated:!E},"To add a domain to this table, create a dummy",i.a.createElement(Fe.a,{href:"#users"},"mail user")," or",i.a.createElement(Fe.a,{href:"#aliases"},"alias")," on the domain first and see the",i.a.createElement(Fe.a,{href:"https://mailinabox.email/guide.html#domain-name-configuration"},"setup guide")," ","for adding nameserver records to the new domain at your registrar (but ",i.a.createElement("i",null,"not")," glue records)."),i.a.createElement(Ia,{items:p,columns:zi,groups:b,openedGroupsState:t}))))},Gi=function(){var e=Object($.useMediaQuery)({minWidth:r.m});return i.a.createElement(f.a,{gap:"m"},i.a.createElement(aa,{isMultiline:e,truncated:!e},"You can replace the default website with your own HTML pages and other static files. This control panel won\u2019t help you design a website, but once you have ",i.a.createElement("code",null,".html")," files you can upload them following these instructions:"),i.a.createElement(te.a,{as:"ol"},i.a.createElement("li",null,"Ensure that any domains you are publishing a website for have no problems on the ",i.a.createElement(Fe.a,{href:"#system_status"},"Status Checks")," page."),i.a.createElement("li",null,"On your personal computer, install an SSH file transfer program such as ",i.a.createElement(Fe.a,{href:"https://filezilla-project.org/"},"FileZilla")," or"," ",i.a.createElement(Fe.a,{href:"http://linuxcommand.org/man_pages/scp1.html"},"scp"),"."),i.a.createElement("li",null,"Log in to this machine with the file transfer program. The server is"," ",i.a.createElement("strong",null,Q.hostname),", the protocol is SSH or SFTP, and use the ",i.a.createElement("strong",null,"SSH login credentials")," that you used when you originally created this machine at your cloud host provider. This is"," ",i.a.createElement("strong",null,"not")," what you use to log in either for email or this control panel. Your SSH credentials probably involves a private key file."),i.a.createElement("li",null,"Upload your ",i.a.createElement("code",null,".html")," or other files to the directory"," ",i.a.createElement("code",null,"/home/user-data/www/default")," on this machine. They will appear directly and immediately on the web."),i.a.createElement("li",null,"The websites set up on this machine are listed in the"," ",i.a.createElement(Fe.a,{href:"#"},"Domains List")," with where to put the files for each website.")))},Hi=function(){var e=Object(u.g)(),t=e.path,a=e.url,n=Object(o.useState)([]),r=[{itemKey:a,headerText:"Domains"},{itemKey:"".concat(a,"/instructions"),headerText:"Uploading Instructions"}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Fa,{items:r}),i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:t},i.a.createElement(Li,{openedGroupsState:n})),i.a.createElement(u.b,{exact:!0,path:"".concat(t,"/instructions")},i.a.createElement(Gi,null))))},Fi=function(){return i.a.createElement(ce,null,i.a.createElement(f.a,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center"},i.a.createElement(ue,{items:[{text:"Static Web Hosting",key:"web",as:"h1"}]})),i.a.createElement(f.a,{gap:"l1"},i.a.createElement(pe,null,i.a.createElement(te.a,null,"This machine is serving a simple, static website at"," ",i.a.createElement(Fe.a,{href:"https://".concat(Q.hostname)},"https://".concat(Q.hostname))," ","and at all domain names that you set up an email user or alias for.")),i.a.createElement(pe,null,i.a.createElement(Hi,null))))};Fi.path="/web";var qi=function(){var e=Object(u.e)();return i.a.createElement(f.a,{styles:{root:{width:"100%"}},as:"nav"},i.a.createElement(re.a,{styles:{root:{padding:0}},farItems:[{key:"navLogout",text:"Log out",iconProps:{iconName:"SignOut"},onClick:function(){e.push(ie.path)}}],items:[{key:"system",text:"System",iconProps:{iconName:"System"},subMenuProps:{items:[{key:"navStatusChecks",text:"Status Checks",onClick:function(){return e.push(Oi.path)}},{key:"navCertificates",text:"TLS (SSL) Certificates",onClick:function(){return e.push(oo.path)}},{key:"navBackupStatus",text:"Backup Status",onClick:function(){return e.push(Br.path)}},{key:"navAdvanced",text:"Advanced",itemType:oe.a.Section,sectionProps:{topDivider:!0,bottomDivider:!0,title:"Advanced",items:[{key:"navCustomDns",text:"Custom DNS",onClick:function(){return e.push(Eo.path)}},{key:"navExternalDnsRoute",text:"External DNS",onClick:function(){return e.push(Co.path)}},{key:"navMonitoring",text:"Munin Monitoring"}]}}]}},{key:"navMail",text:"Mail",iconProps:{iconName:"Mail"},subMenuProps:{items:[{key:"navInstructions",text:"Instructions",onClick:function(){return e.push(an.path)}},{key:"navUsers",text:"Users",onClick:function(){return e.push(Hn.path)}},{key:"navAliases",text:"Aliases",onClick:function(){return e.push(Ka.path)}}]}},{key:"navContacts",text:"Contacts/Calendar",iconProps:{iconName:"Calendar"},onClick:function(){return e.push(ar.path)}},{key:"navWeb",text:"Web",iconProps:{iconName:"SiteScan"},onClick:function(){return e.push(Fi.path)}}]}))},Ki=Object(r.I)({alignSelf:"stretch",backgroundColor:Object(r.E)().semanticColors.bodyBackground}),Vi=function(){return i.a.createElement(f.a,{as:"header",className:Ki,horizontal:!0,horizontalAlign:"center"},i.a.createElement(f.a,{as:"section",gap:"s1",styles:{root:{maxWidth:1170,width:"100%"}},padding:"0 m 0 m",horizontal:!0,verticalAlign:"center"},i.a.createElement(f.a.Item,null,i.a.createElement(ee.a,{src:ne.a,alt:"mailinabox login",width:34})),i.a.createElement(f.a.Item,{disableShrink:!0},i.a.createElement(te.a,{nowrap:!0,variant:"large"},"Mail-in-a-Box")),i.a.createElement(qi,null)))},Xi=function e(){var t=Object(l.c)((function(e){return e.auth})).isAuthenticated,a=Object(u.f)(),n=Object(u.e)(),s=Object($.useMediaQuery)({minWidth:r.n}),c=Object(p.a)({},s&&{gap:"l1",horizontalAlign:"center"});return Object(o.useEffect)((function(){t||a.pathname===_i.path||n.push(_i.path)}),[n,t,a.pathname]),i.a.createElement(f.a,c,i.a.createElement(Vi,null),i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:[e.path,Oi.path]},i.a.createElement(Oi,null)),i.a.createElement(u.b,{path:oo.path},i.a.createElement(oo,null)),i.a.createElement(u.b,{path:Br.path},i.a.createElement(Br,null)),i.a.createElement(u.b,{path:Eo.path},i.a.createElement(Eo,null)),i.a.createElement(u.b,{path:Co.path},i.a.createElement(Co,null)),i.a.createElement(u.b,{exact:!0,path:an.path},i.a.createElement(an,null)),i.a.createElement(u.b,{path:Hn.path},i.a.createElement(Hn,null)),i.a.createElement(u.b,{path:Ka.path},i.a.createElement(Ka,null)),i.a.createElement(u.b,{exact:!0,path:ar.path},i.a.createElement(ar,null)),i.a.createElement(u.b,{path:Fi.path},i.a.createElement(Fi,null)),i.a.createElement(u.b,{exact:!0,path:ie.path},i.a.createElement(ie,null)),i.a.createElement(u.a,{to:"/404"})))};Xi.path="/";var Yi={email:Q.mockApi?"demo@example.com":"",password:Q.mockApi?"mailinabox"+Math.random().toString(16):"",remember:!0},Qi=function(){var e=function(e,t){var a=Object(o.useState)(null),n=Object(h.a)(a,2),r=n[0],i=n[1],s=Object(o.useState)(null),c=Object(h.a)(s,2),l=c[0],u=c[1],m=Object(o.useState)(!1),d=Object(h.a)(m,2),p=d[0],f=d[1];return[function(){f(!0),e().then((function(e){t?t(e):i(e)}),function(){var e=Object(w.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,K(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){f(!1)}))},{response:r,setResponse:i,error:l,setError:u,isLoading:p,reset:function(){i(null),u(null),f(!1)}}]}((function(){return W.getMe()}),(function(e){e.status!==O.MeAuthStatus.Ok?m(e.reason||"Unknown authentication error"):e.apiKey?d(e):m("You are not an administrator on this system.")})),t=Object(h.a)(e,2),a=t[0],n=t[1],r=n.isLoading,s=n.response,c=n.error,m=n.setError,d=n.setResponse,A=_(Yi),C=A.inputs,x=A.setInputs,k=A.onInputChange,R=Object(l.c)((function(e){return e.auth})),I=R.isAuthenticated,T=R.error,D=Object(l.b)(),N=Object(u.e)();Object(o.useEffect)((function(){I?N.push(Xi.path):D(M({username:C.email,password:C.password,isAuthenticated:!1,error:T}))}),[T,D,N,C.email,C.password,I]),Object(o.useEffect)((function(){s&&D(M({username:s.email,password:s.apiKey,isAuthenticated:!0,authError:null,remember:C.remember}))}),[D,C.remember,s]);var B=c||T;return i.a.createElement(f.a,{as:"form",gap:"m",onSubmit:function(e){e.preventDefault(),m(null),a()}},B&&i.a.createElement(aa,{messageBarType:g.a.error,isMultiline:!1,onDismiss:function(e){m(null),D(M({username:C.email,password:C.password,error:null}))},dismissButtonAriaLabel:"Close"},B),i.a.createElement(f.a,{gap:"m"},i.a.createElement(b.a,{label:"Email",value:C.email,required:!0,type:"email",name:"email",autoFocus:!0,onChange:k}),i.a.createElement(b.a,{label:"Password",value:C.password,name:"password",required:!0,type:"password",onChange:k}),i.a.createElement(E.a,{label:"Remember me",checked:C.remember,onChange:function(e,t){x(Object(p.a)(Object(p.a)({},C),{},{remember:!!t}))}})),i.a.createElement(f.a,{horizontalAlign:"end",verticalAlign:"center",horizontal:!0,gap:"s1"},r&&i.a.createElement(y.a,{size:v.a.medium}),i.a.createElement(S.a,{type:"submit",text:"Sign in",disabled:r})))},Ji=function(){return i.a.createElement(f.a,{horizontal:!0,horizontalAlign:"start",gap:"m"},i.a.createElement(ee.a,{src:ne.a,alt:"mailinabox login",width:34}),i.a.createElement(te.a,{block:!0,variant:"xLarge"},"Mail-in-a-Box Login"))},Zi=Object(r.I)(Object(p.a)(Object(p.a)({maxWidth:420,boxShadow:Object(r.E)().effects.elevation8,backgroundColor:Object(r.E)().palette.white},r.b.slideUpIn20),{},{animationDuration:"1s"})),_i=function(){return i.a.createElement(f.a,{horizontalAlign:"center",verticalAlign:"center",verticalFill:!0,horizontal:!0,padding:"l1"},i.a.createElement(f.a,{grow:1,className:Zi,verticalAlign:"center",gap:"m",padding:"l1"},i.a.createElement(Ji,null),i.a.createElement(Qi,null)))};_i.path="/login";var $i=function(e){var t=e.children,a=Object(me.a)(e,["children"]),n=Object(l.c)((function(e){return e.auth})).isAuthenticated;return i.a.createElement(u.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:i.a.createElement(u.a,{to:{pathname:_i.path,state:{from:a}}})}}))},es=function(){return i.a.createElement(u.c,{history:d},i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:_i.path},i.a.createElement(_i,null)),i.a.createElement(u.b,{exact:!0,path:"/404"},"Not Found"),i.a.createElement($i,{path:Xi.path},i.a.createElement(Xi,null))))},ts=a(44),as=Object(ts.c)({auth:N,system:Object(ts.c)({status:Yo,reboot:Go,privacy:Bo,backups:br}),dns:Ot,ssl:Qt,users:vn,aliases:Me,web:ji}),ns=Object(I.a)({reducer:as,middleware:Object(I.c)().concat((function(e){var t=e.getState;return function(e){return function(a){var n,r=t(),o=e(a);if(a.type===M.type){var i=a.payload,s=i.username,c=i.password,l=i.isAuthenticated,u=i.remember;s&&c&&(n={username:s,password:c},Object.assign(B,n)),r.auth.isAuthenticated!==l&&(R.setUsername(s),R.setPassword(c),R.persistToStorage(u))}return o}}}))});function rs(){c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(l.a,{store:ns},i.a.createElement(es,null))),document.getElementById("app"))}Object(n.a)(),Object(r.I)({selectors:{":global(body)":{background:Object(r.E)().palette.neutralLighter},":global(body), :global(html), :global(#app)":{margin:0,padding:0,height:"100%"},':global(.ms-DetailsRow [class^="DetailsRow-actions-cell"])':{padding:"0",display:"flex",alignItems:"center",justifyContent:"center"}}}),Q.mockApi?Promise.all([a.e(4),a.e(3)]).then(a.bind(null,365)).then((function(){return rs()}),(function(){console.error("There was an error loading the mock api")})):rs()},82:function(e,t){e.exports="data:image/png;base64,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"}},[[160,1,2]]]);
//# sourceMappingURL=main.16ef14ab.chunk.js.map